!function(t){function e(o){if(n[o])return n[o].exports;var r=n[o]={exports:{},id:o,loaded:!1};return t[o].call(r.exports,r,r.exports,e),r.loaded=!0,r.exports}var n={};return e.m=t,e.c=n,e.p="",e(0)}([function(t,e,n){t.exports=n(1)},function(t,e,n){(function(t){"use strict";function e(t){return t&&t.__esModule?t:{"default":t}}n(2),n(3),n(6),n(17),n(21),n(27),n(33),n(54),n(56),n(86),n(87),n(90),n(93),n(94),n(96),n(97),n(98),n(100),n(113),n(114);var o=n(7),r=e(o),i=n(116);t.UxBuilder=window.parent.UxBuilder,r["default"].requires.push("app.filters"),r["default"].requires.push("app.services");for(var s in i.data.modules.iframe)r["default"].requires.push(i.data.modules.iframe[s]);r["default"].config(["$controllerProvider",function(t){angular.forEach(i.data.shortcodes,function(e,n){t.register(n+"__controller",e.controller||angular.noop)})}])}).call(e,function(){return this}())},function(t,e){window.MutationObserver=window.MutationObserver||window.WebKitMutationObserver||function(t){function e(t){this.g=[],this.k=t}function n(t){!function n(){var o=t.takeRecords();o.length&&t.k(o,t),t.f=setTimeout(n,e._period)}()}function o(e){var n,o={type:null,target:null,addedNodes:[],removedNodes:[],previousSibling:null,nextSibling:null,attributeName:null,attributeNamespace:null,oldValue:null};for(n in e)o[n]!==t&&e[n]!==t&&(o[n]=e[n]);return o}function r(t,e){var n=a(t,e);return function(o){var r,l=o.length;e.a&&n.a&&i(o,t,n.a,e.d),(e.b||e.e)&&(r=s(o,t,n,e)),(r||o.length!==l)&&(n=a(t,e))}}function i(e,n,r,i){for(var s,a,l={},c=n.attributes,u=c.length;u--;)s=c[u],a=s.name,i&&i[a]===t||(s.value!==r[a]&&e.push(o({type:"attributes",target:n,attributeName:a,oldValue:r[a],attributeNamespace:s.namespaceURI})),l[a]=!0);for(a in r)l[a]||e.push(o({target:n,type:"attributes",attributeName:a,oldValue:r[a]}))}function s(e,n,r,s){function a(t,n,r,a,l){var u=t.length-1;l=-~((u-l)/2);for(var d,p,f;f=t.pop();)d=r[f.h],p=a[f.i],s.b&&l&&Math.abs(f.h-f.i)>=u&&(e.push(o({type:"childList",target:n,addedNodes:[d],removedNodes:[d],nextSibling:d.nextSibling,previousSibling:d.previousSibling})),l--),s.a&&p.a&&i(e,d,p.a,s.d),s.c&&3===d.nodeType&&d.nodeValue!==p.c&&e.push(o({type:"characterData",target:d})),s.e&&c(d,p)}function c(n,r){for(var p,f,h,g,m,v=n.childNodes,$=r.b,b=v.length,y=$?$.length:0,w=0,x=0,E=0;x<b||E<y;)g=v[x],m=(h=$[E])&&h.j,g===m?(s.a&&h.a&&i(e,g,h.a,s.d),s.c&&h.c!==t&&g.nodeValue!==h.c&&e.push(o({type:"characterData",target:g})),f&&a(f,n,v,$,w),s.e&&(g.childNodes.length||h.b&&h.b.length)&&c(g,h),x++,E++):(u=!0,p||(p={},f=[]),g&&(p[h=l(g)]||(p[h]=!0,-1===(h=d($,g,E,"j"))?s.b&&(e.push(o({type:"childList",target:n,addedNodes:[g],nextSibling:g.nextSibling,previousSibling:g.previousSibling})),w++):f.push({h:x,i:h})),x++),m&&m!==v[x]&&(p[h=l(m)]||(p[h]=!0,-1===(h=d(v,m,x))?s.b&&(e.push(o({type:"childList",target:r.j,removedNodes:[m],nextSibling:$[E+1],previousSibling:$[E-1]})),w--):f.push({h:h,i:E})),E++));f&&a(f,n,v,$,w)}var u;return c(n,r),u}function a(t,e){var n=!0;return function o(t){var r={j:t};return!e.c||3!==t.nodeType&&8!==t.nodeType?(e.a&&n&&1===t.nodeType&&(r.a=u(t.attributes,function(t,n){return e.d&&!e.d[n.name]||(t[n.name]=n.value),t})),n&&(e.b||e.c||e.a&&e.e)&&(r.b=c(t.childNodes,o)),n=e.e):r.c=t.nodeValue,r}(t)}function l(t){try{return t.id||(t.mo_id=t.mo_id||p++)}catch(e){try{return t.nodeValue}catch(n){return p++}}}function c(t,e){for(var n=[],o=0;o<t.length;o++)n[o]=e(t[o],o,t);return n}function u(t,e){for(var n={},o=0;o<t.length;o++)n=e(n,t[o],o,t);return n}function d(t,e,n,o){for(;n<t.length;n++)if((o?t[n][o]:t[n])===e)return n;return-1}e._period=30,e.prototype={observe:function(t,e){for(var o={a:!!(e.attributes||e.attributeFilter||e.attributeOldValue),b:!!e.childList,e:!!e.subtree,c:!(!e.characterData&&!e.characterDataOldValue)},i=this.g,s=0;s<i.length;s++)i[s].m===t&&i.splice(s,1);e.attributeFilter&&(o.d=u(e.attributeFilter,function(t,e){return t[e]=!0,t})),i.push({m:t,l:r(t,o)}),this.f||n(this)},takeRecords:function(){for(var t=[],e=this.g,n=0;n<e.length;n++)e[n].l(t);return t},disconnect:function(){this.g=[],clearTimeout(this.f),this.f=null}};var p=1;return e}(void 0)},function(t,e,n){"use strict";n(4),n(5)},function(t,e){(function(t){"use strict";t.UX_EMPTY_VALUE="<none>"}).call(e,function(){return this}())},function(t,e){(function(t){"use strict";!function(){t.isIframe=function(){return!!window.frameElement},t.camelCase=function(t,e){return t=e?t.charAt(0).toUpperCase()+t.slice(1):t,jQuery.camelCase(t.replace(/\_|\:/g,"-",!0))},t.snakeCase=function(t){var e=arguments.length<=1||void 0===arguments[1]?"_":arguments[1];return t.replace(/[A-Z]/g,function(t,n){return(n?e:"")+t.toLowerCase()})},t.capitalize=function(t){return t.charAt(0).toUpperCase()+t.slice(1)},t.round=function(t,e){return Math.round(t/e)*e}}()}).call(e,function(){return this}())},function(t,e,n){"use strict";function o(t){return t&&t.__esModule?t:{"default":t}}var r=n(7),i=o(r);i["default"].constant("Event",{READY:"ready",CHANGE:"change",COMPLETE:"complete",ERROR:"error",SCROLL:"scroll",RESIZE:"resize"}),i["default"].constant("AppEvent",{READY:"app-ready",APPLY:"app-apply",EMIT:"app-emit",BROADCAST:"app-broadcast"}),i["default"].constant("IframeEvent",{READY:"iframe-ready",RELOAD:"iframe-reload",RESIZE:"iframe-resize",CHANGED:"iframe-changed",SCROLL:"iframe-scroll"}),i["default"].constant("MouseEvent",{}),i["default"].constant("TouchEvent",{}),i["default"].constant("ShortcodeEvent",{CREATE:"shortcode-create",CREATED:"shortcode-created",ATTACHED:"shortcode-attached",CONFIGURE:"shortcode-configure",RECOMPILED:"shortcode-recompiled",ACTIVE:"shortcode-active",INACTIVE:"shortcode-inactive",CHANGED:"shortcode-changed",ADDED:"shortcode-added",MOVED:"shortcode-moved",DETACHED:"shortcode-detached",REMOVED:"shortcode-removed",MOUSEOVER:"shortocde-mouseover",MOUSEOUT:"shortocde-mouseout",CLICK:"shortcode-click",OUTLINED:"shortcode-outlined",SELECTED:"shortcode-selected",DUPLICATED:"shortcode-duplicated",DELETED:"shortcode-deleted"}),i["default"].constant("ChildEvent",{ADDED:"child-added",REMOVED:"child-removed"}),i["default"].constant("OptionsEvent",{SHOW:"options-show",CLEAR:"options-clear",HIDE:"options-hide"}),i["default"].constant("MediaEvent",{CHANGED:"media-changed"}),i["default"].constant("DragEvent",{START:"draggable-start",MOVE:"draggable-move",END:"draggable-end"})},function(t,e,n){"use strict";function o(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0}),e.uxBuilder=void 0;var r=n(8),i=o(r),s=n(9),a=o(s),l=n(10),c=o(l),u=(e.uxBuilder=new c["default"],angular.module("uxBuilder",[]));e["default"]=u,u.config(i["default"]),u.run(a["default"])},function(t,e){"use strict";function n(t,e,n,o){t.digestTtl(20),o.debugInfoEnabled(!1),e.defaults.headers.common["X-Requested-With"]="XMLHttpRequest",n.decorator("$rootScope",["$delegate",function(t){return Object.defineProperty(t.constructor.prototype,"_",{value:_,enumerable:!1}),t}])}n.$inject=["$rootScopeProvider","$httpProvider","$provide","$compileProvider"],Object.defineProperty(e,"__esModule",{value:!0}),e["default"]=n},function(t,e){(function(t){"use strict";function n(t,e,n){var o=!0;t.$watch(function(){o&&e.postCustomMessage(n.APPLY)}),e.addEventListener(n.APPLY,function(){o=!1,null===t.$$phase&&t.$apply(),o=!0},!1),e.addEventListener(n.BROADCAST,function(e){t.$broadcast(e.data.type,e.data.data)},!1),e.addEventListener(n.EMIT,function(e){t.$emit(e.data.type,e.data.data)},!1)}n.$inject=["$rootScope","$window","AppEvent"],Object.defineProperty(e,"__esModule",{value:!0}),e["default"]=n;var o=null;t.postCustomMessage=function(t,e,n){o=o||(self===top?document.querySelectorAll(".iframe-frame")[0].contentWindow:window.parent),n=new CustomEvent(t),n.data=e,o.dispatchEvent(n)}}).call(e,function(){return this}())},function(t,e,n){"use strict";function o(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var r=n(11),i=o(r),s=n(12),a=o(s),l=n(16),c=function(){function t(){(0,i["default"])(this,t)}return(0,a["default"])(t,[{key:"controller",value:function(t,e){l.store.shortcodes.hasOwnProperty(t)&&(l.store.shortcodes[t].controller=e)}},{key:"on",value:function(t,e){l.store.$$events[t]=l.store.$$events[t]||[],l.store.$$events[t].push(e)}},{key:"addfilter",value:function(t,e){l.store.$$filters[t]=l.store.$$filters[t]||[],l.store.$$filters[t].push(e)}},{key:"addAction",value:function(t){l.store.actions.push(t)}}]),t}();e["default"]=c},function(t,e){"use strict";e.__esModule=!0,e["default"]=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}},function(t,e,n){"use strict";function o(t){return t&&t.__esModule?t:{"default":t}}e.__esModule=!0;var r=n(13),i=o(r);e["default"]=function(){function t(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),(0,i["default"])(t,o.key,o)}}return function(e,n,o){return n&&t(e.prototype,n),o&&t(e,o),e}}()},function(t,e,n){t.exports={"default":n(14),__esModule:!0}},function(t,e,n){var o=n(15);t.exports=function(t,e,n){return o.setDesc(t,e,n)}},function(t,e){var n=Object;t.exports={create:n.create,getProto:n.getPrototypeOf,isEnum:{}.propertyIsEnumerable,getDesc:n.getOwnPropertyDescriptor,setDesc:n.defineProperty,setDescs:n.defineProperties,getKeys:n.keys,getNames:n.getOwnPropertyNames,getSymbols:n.getOwnPropertySymbols,each:[].forEach}},function(t,e){"use strict";function n(t){return r.$set=function(e,n){return t(o(e)).assign(r,n)},r.$get=function(e,n){var i=t(o(e))(r);return!angular.isDefined(i)&&n?r.$set(e,n):i},r.$unset=function(e){var n;return e.indexOf("*")?(n=e.split("*")[0],t(o(n)).assign(r,null)):t(o(e)).assign(r,null)},r}function o(t){var e=[],n=t.split(".");return _.each(n,function(t){e.push(jQuery.camelCase(t.replace(/:/g,"-")))}),e.join(".")}n.$inject=["$parse"],Object.defineProperty(e,"__esModule",{value:!0}),e["default"]=n;var r=e.store=(window.parent||window).uxBuilderData},function(t,e,n){"use strict";function o(t){return t&&t.__esModule?t:{"default":t}}var r=n(7),i=o(r),s=n(18),a=o(s),l=n(19),c=o(l),u=n(20),d=o(u);i["default"].directive("draggableShortcode",a["default"]),i["default"].directive("toNumber",c["default"]),i["default"].directive("wpAttachment",d["default"])},function(t,e){"use strict";function n(t){return{restrict:"A",controllerAs:"draggableShortcode",bindToController:{shortcode:"=draggableShortcode",options:"=draggableOptions",element:"=draggableElement"},controller:["$scope","$element","targets",function(e,n,o){var r=this,i=null;e.$watch("draggableShortcode.shortcode",function(s){i&&i.destroy(),i=t(r.shortcode,r.element||n.get(0),r.options),r.options&&r.options.targets&&r.options.targets.map(function(t){angular.isObject(t)?(t.shortcode=r.shortcode,t.element=n,o.add(t.name,t)):o.add(t,{shortcode:r.shortcode,element:n})}),e.$on("$destroy",function(){i.destroy(),o.removeElement(n.get(0))})})}]}}n.$inject=["draggable"],Object.defineProperty(e,"__esModule",{value:!0}),e["default"]=n},function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e["default"]=function(){return{require:"ngModel",link:function(t,e,n,o){o.$parsers.push(function(t){return""+t}),o.$formatters.push(function(t){return parseFloat(t,10)})}}}},function(t,e){"use strict";function n(t){return{restrict:"A",controllerAs:"attachment",bindToController:!0,scope:{id:"=wpAttachment",size:"=wpAttachmentSize",model:"=wpAttachmentModel",width:"@wpAttachmentWidth",height:"@wpAttachmentHeight"},controller:["app","store","$scope","$element",function(t,e,n,o){function r(){var t=n.attachment.id,o=n.attachment.size||"full",r=n.attachment.width||0,s=n.attachment.height||0,a=r||s?"w"+r+".h"+s:o,l="cache.attachment."+a+".id"+t,c=e.$get(l);return angular.isDefined(c)?i(c):void jQuery.getJSON(e.ajaxUrl,{action:"ux_builder_get_attachment",attachment_id:t,attachment_size:o,attachment_width:r,attachment_height:s}).success(function(t){t.success?i(e.$set(l,t.data)):window.self===window.top&&n.attachment.model&&(c=["data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAJCAYAAAA7KqwyAAAAGUlEQVQokWM8c+bMfwYKABMlmkcNGDYGAADLugN1bDi2rwAAAABJRU5ErkJggg==","480px","270px"]),c&&i(c)}).fail(function(e){console.error("Failed to load attachment",t)})}function i(t){"IMG"===o[0].tagName?(o.addClass("processing"),o.on("load",function(){o.off("load").removeClass("processing")}),o.attr("src",t[0]),o.attr("width",t[1]),o.attr("height",t[2])):o.css("background-image","url("+t[0]+")"),l=!0}function s(){"IMG"===o[0].tagName?(o.removeAttr("src"),o.removeAttr("width"),o.removeAttr("height")):o.css("background-image",""),l=!1}var a=this,l=!1;o.on("load.wpAttachment",function(){return t("tools").fixPositions()}),n.$watch(function(){return a.id},function(t){return t&&""!==t?"string"==typeof t&&t.indexOf("/")>-1?i([t]):void r():s()}),n.$watch(function(){return a.size},function(t,e){l&&t!==e&&r()}),n.$on("$destroy",function(){o.off("load.wpAttachment")})}]}}n.$inject=["app"],Object.defineProperty(e,"__esModule",{value:!0}),e["default"]=n},function(t,e,n){"use strict";function o(t){return t&&t.__esModule?t:{"default":t}}var r=n(22),i=o(r),s=n(23),a=o(s),l=n(24),c=o(l),u=n(25),d=o(u),p=n(26),f=o(p);angular.module("app.filters",[]).filter("noDefault",i["default"]).filter("heightCheck",a["default"]).filter("html",c["default"]).filter("rgba",d["default"]).filter("trusted",f["default"])},function(t,e){"use strict";function n(){return function(t,e){return t!==e["default"]&&t}}Object.defineProperty(e,"__esModule",{value:!0}),e["default"]=n},function(t,e){"use strict";function n(){return function(t){return"100%"===t?"100vh":t}}Object.defineProperty(e,"__esModule",{value:!0}),e["default"]=n},function(t,e){"use strict";function n(t){return function(e){return t.trustAsHtml(e)}}n.$inject=["$sce"],Object.defineProperty(e,"__esModule",{value:!0}),e["default"]=n},function(t,e){"use strict";function n(){return function(t){var e=t;if(e.indexOf("#")>-1){var n=/^#?([a-f\d])([a-f\d])([a-f\d])$/i;e=e.replace(n,function(t,e,n,o){return e+e+n+n+o+o}),e=e.replace("#","");var o=parseInt(e.substring(0,2),16),r=parseInt(e.substring(2,4),16),i=parseInt(e.substring(4,6),16);e="rgba("+o+","+r+","+i+",0.3)"}return e}}Object.defineProperty(e,"__esModule",{value:!0}),e["default"]=n},function(t,e){"use strict";function n(t){return function(e){var n=arguments.length<=1||void 0===arguments[1]?"html":arguments[1];return t.trustAs(n,e)}}n.$inject=["$sce"],Object.defineProperty(e,"__esModule",{value:!0}),e["default"]=n},function(t,e,n){"use strict";n(28),n(29),n(30),n(31),n(32)},function(t,e){(function(t){"use strict";t.jQuery.fn.cover=function(e){var n=arguments.length<=1||void 0===arguments[1]?{}:arguments[1];if(!e)return this;var o=t.jQuery(e),r=o.get(0).ownerDocument,i=r.defaultView,s=o.outerOffset(n),a=!!this.get(0).ownerDocument.defaultView.frameElement,l=!!o.get(0).ownerDocument.defaultView.frameElement;if(!a&&l){var c=i.frameElement.getBoundingClientRect();s.left+=c.left,s.top+=c.top}return a&&l&&(s.top+=r.documentElement.scrollTop||r.body.scrollTop),this.css({width:s.width.toFixed(2),height:s.height.toFixed(2),transform:"translateX("+s.left.toFixed()+"px) translateY("+s.top.toFixed()+"px)"})}}).call(e,function(){return this}())},function(t,e){(function(t){"use strict";function e(t){var e=!0;return t.map(function(t){var n=window.getComputedStyle(t);"none"===n.display&&(e=!1),"hidden"===n.visibility&&(e=!1),"0.0"===n.opacity&&(e=!1)}),e}t.jQuery.fn.isVisible=function(){var t=[this.get(0)];return e(t)}}).call(e,function(){return this}())},function(t,e){(function(t){"use strict";t.jQuery.fn.outerOffset=function(){var e=arguments.length<=0||void 0===arguments[0]?{}:arguments[0],n={width:0,height:0};return this.each(function(o,r){var i=t.jQuery(r),s=r.getBoundingClientRect(),a=0,l=0,c=s.right-(n.left?n.left:s.left),u=s.bottom-(n.top?n.top:s.top),d=i.css("display").search("inline")>-1;e.includeMargins&&(d?c=i.outerWidth(!0):u=i.outerHeight(!0)),n.top=(s.top>n.top?n.top:s.top)+l,n.left=(s.left>n.left?n.left:s.left)+a,n.width=c>n.width?c:n.width,n.height=u>n.height?u:n.height}),n.right=n.left+n.width,n.bottom=n.top+n.height,n}}).call(e,function(){return this}())},function(t,e){(function(t){"use strict";t.jQuery.fn.scrollToElement=function(e){var n=arguments.length<=1||void 0===arguments[1]?450:arguments[1],o=arguments.length<=2||void 0===arguments[2]?0:arguments[2],r=arguments.length<=3||void 0===arguments[3]?null:arguments[3],i=t.jQuery(e),s=t.window.innerHeight,a=i.get(0).ownerDocument.body.getBoundingClientRect(),l=i.get(0).getBoundingClientRect(),c=l.top-a.top+l.height/2+o;return l.height<s?c-=s/2:l.height>s&&(c=l.top-a.top),this.animate({scrollTop:c},n,r)}}).call(e,function(){return this}())},function(t,e){(function(t){"use strict";t.jQuery.fn.shortcode=function(){var e=this.parents(),n=null;return this.data("shortcode")?this.data("shortcode"):(e.each(function(e,o){t.jQuery(o).data("shortcode")&&!n&&(n=t.jQuery(o).data("shortcode"))}),n)}}).call(e,function(){return this}())},function(t,e,n){"use strict";function o(t){return t&&t.__esModule?t:{"default":t}}var r=n(34),i=o(r),s=n(35),a=o(s),l=n(36),c=o(l),u=n(37),d=o(u),p=n(38),f=o(p),h=n(39),g=o(h),m=n(40),v=o(m),$=n(41),b=o($),y=n(42),w=o(y),x=n(47),E=o(x),_=n(48),S=o(_),k=n(16),C=o(k),A=n(51),O=o(A),M=n(52),P=o(M),D=n(53),j=o(D);angular.module("app.services",[]).service("$angular",i["default"]).service("actions",a["default"]).service("app",c["default"]).service("contextmenu",d["default"]).service("draggable",f["default"]).service("dependencies",g["default"]).service("editor",v["default"]).service("iframe",w["default"]).service("hammer",b["default"]).service("ResponsiveHelper",E["default"]).service("Shortcode",S["default"]).service("utils",P["default"]).service("store",C["default"]).service("targets",O["default"]).service("$iframe",j["default"])},function(t,e,n){"use strict";function o(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var r=n(11),i=o(r),s=["$window",function a(t){return(0,i["default"])(this,a),t.frameElement?t.parent.angular:angular}];e["default"]=s},function(t,e,n){"use strict";function o(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var r=n(11),i=o(r),s=n(12),a=o(s),l=function(){function t(e){(0,i["default"])(this,t),this.store=e,this.store.states=this.store.states||{}}return t.$inject=["store"],(0,a["default"])(t,[{key:"outlineShortcode",value:function(t){this.store.states.outlinedShortcode=t}},{key:"selectShortcode",value:function(t){this.store.states.selectedShortcode=t}},{key:"configureShortcode",value:function(t){this.store.states.configuringShortcode=t}}]),t}();e["default"]=l},function(t,e,n){"use strict";function o(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var r=n(11),i=o(r),s=["store","$rootScope","$window","$timeout","$log","AppEvent","IframeEvent","MediaEvent",function a(t,e,n,o,r,s,l,c){function u(e){return t.components[e]}return(0,i["default"])(this,a),u["goto"]=function(t){(window.parent||window).location.hash=t},u.exit=function(){var e="publish"===t.post.status?t.backUrl:t.editUrl;t.isSaved?(window.parent||window).location.href=e:confirm("Exit? All changes since last save will be lost.")&&((window.parent||window).location.href=e)},u.register=function(e,n){t.components=t.components||{},t.components[e]=n},u.remove=function(e){delete t.components[e]},u.apply=function(t){e.$apply(t)},u.broadcast=function(t,o){e.$broadcast(t,o),n.postCustomMessage(s.BROADCAST,{type:t,data:o})},u.emit=function(t,o){e.$emit(t,o),n.postCustomMessage(s.EMIT,{type:t,data:o})},u.trigger=function(e){for(var n=arguments.length,o=Array(n>1?n-1:0),r=1;r<n;r++)o[r-1]=arguments[r];if(this.broadcast.apply(this,[e].concat(o)),t.$$events.hasOwnProperty(e))for(var i=0;i<t.$$events[e].length;i++){var s;(s=t.$$events[e][i]).call.apply(s,[this].concat(o))}},u.filter=function(e,n){if(t.$$filters.hasOwnProperty(e)){for(var o=arguments.length,r=Array(o>2?o-2:0),i=2;i<o;i++)r[i-2]=arguments[i];for(var s=0;s<t.$$filters[e].length;s++){var a;n=(a=t.$$filters[e][s]).call.apply(a,[this,n].concat(r))}}return n},u.states=t.states,u.resetAll=function(){t.$$events={},t.$$filters={},this.resetState()},u.resetState=function(){for(var e in t.states)t.states[e]=null},u.freeze=function(e){t.states.freezed=e},u.outlineShortcode=function(e){t.states.outlinedShortcode=t.states.freezed!==!0?e:null},u.selectShortcode=function(e){t.states.selectedShortcode=t.states.freezed!==!0?e:null},u.configureShortcode=function(t){this["goto"](t?"/shortcode/"+t.$id:"/")},u.setBreakpoint=function(e){t.breakpoints.current=e,u.broadcast(c.CHANGED,e)},u}];e["default"]=s},function(t,e,n){"use strict";function o(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var r=n(11),i=o(r),s=n(12),a=o(s),l=function(){function t(e,n){(0,i["default"])(this,t),this.app=e,this.utils=n}return t.$inject=["app","utils"],(0,a["default"])(t,[{key:"attach",value:function(t){t.addEventListener&&t.addEventListener("contextmenu",this.onRightClick.bind(this),!1)}},{key:"onRightClick",value:function(t){var e=this.utils.getGlobalCoordinates(t.view,t.clientX,t.clientY),n=this.utils.shortcodeFromPoint(e.x,e.y);n.isRoot||(this.menu.open(n,t.target,t.clientX,t.clientY),this.app.apply(),t?t.preventDefault():window.event.returnValue=!1)}},{key:"menu",get:function(){return this.app("contextMenu")}}]),t}();e["default"]=l},function(t,e,n){(function(t){"use strict";function o(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var r=n(11),i=o(r),s=["app","store","targets","Shortcode","$document","$window","$timeout","$iframe","utils","DragEvent",function a(e,n,o,r,s,l,c,u,d,p){(0,i["default"])(this,a);var f={},h=(window.parent||window).angular.element("draggable-helper");return function(i,a,g){function m(t){t.srcEvent.stopPropagation(),t.srcEvent.stopImmediatePropagation()}function v(t){h.find("h3 span").text(i.data.name),s.onkeydown=function(t){return e("tools").toggleAddableButton(t.altKey)},s.onkeyup=function(t){return e("tools").toggleAddableButton(t.altKey)},f.shortcode=i,f.container=i.parent.$element,f.isSelected=e.states.selectedShortcode===i,f.defaultPrevented=!1,f.showHelper=!0,f.constrains=!1,f.initial={},y(t),f.initial={},f.initial.innerX=f.innerX,f.initial.innerY=f.innerY,f.initial.elementX=f.elementX,f.initial.elementY=f.elementY,i.$element.addClass("uxb-shortcode-dragging"),angular.element(l.parent.document.body).addClass("dragging"),angular.element("body").addClass("dragging"),g.start(t),i.states.dragging=!0,n.isDragging=!0,g.broadcast&&e.broadcast(p.START,f),e("tools").apply(),i.$scope.$digest()}function $(t){if(f.shortcode||v(t),y(t),f.defaultPrevented||(h.addClass("active"),h.css({transform:"translate3d("+f.global.x+"px, "+f.global.y+"px, 0px)"}),h.find("h3 span").css({transform:"rotate("+f.originalEvent.velocityY*-25+"deg)"})),f.target=null,f.addToShortcode=null,i.$recompile)return _.stop(!0),b(t);if(o.find(f.global.x,f.global.y).map(function(t){!f.target&&t.target&&t.target.allows(i)&&(f.target=t)}),f.target){var n=f.target.target===i.parent,r=n&&f.target.index===i.index,s=n&&f.target.index===i.index+1,a=t.srcEvent.altKey;!r&&!s||a||(f.target=null)}g.move(t),e("tools").showAddableSpot(f.target,t.srcEvent.altKey),e.outlineShortcode(f.target?f.target.target.parent:null),g.broadcast&&e.broadcast(p.MOVE,f),e("tools").apply(),i.$scope.$digest()}function b(t){if(y(t),h.find("h3 span").removeAttr("style"),h.removeClass("active"),i.states.dragging=!1,f.target&&!f.defaultPrevented){var o=(e.states.selectedShortcode===i,t.srcEvent.altKey),a=f.target.target,u=f.target.index;o?(f.addedShortode=r.duplicate(i),f.addedShortode=a.addChild(f.addedShortode,a===f.addedShortode.parent&&u>=f.addedShortode.index?u+1:u)):f.addedShortode=r.move(i,a,u)}i.$element.removeClass("uxb-shortcode-dragging"),angular.element(l.parent.document.body).removeClass("dragging"),angular.element("body").removeClass("dragging"),g.end(t),g.broadcast&&e.broadcast(p.END,f),s.onkeydown=null,s.onkeyup=null,f.isSelected&&e.selectShortcode(f.addedShortode),f={},c(function(){return n.isDragging=!1},0)}function y(t){f.originalEvent=t,f.global=d.getGlobalCoordinates(t.target.ownerDocument.defaultView,t.center.x,t.center.y),f.element=angular.element(E),f.draggable=x,f.main={},f.main.x=f.global.x,f.main.y=f.global.y,f.iframe={},f.iframe.x=f.global.x-u().offset().left,f.iframe.y=f.global.y-u().offset().top,f.virtual={},f.virtual.width=f.shortcode.$element.width(),f.virtual.height=f.shortcode.$element.height(),f.virtual.top=f.iframe.y-f.initial.elementY,f.virtual.right=f.iframe.x+f.virtual.width-f.initial.elementX,f.virtual.bottom=f.iframe.y+f.virtual.height-f.initial.elementY,f.virtual.left=f.iframe.x-f.initial.elementX,f.constrains&&w(t),f.elementX=f.iframe.x-i.$element.offset().left,f.elementY=f.iframe.y-i.$element.offset().top+u().contents().scrollTop(),f.preventDefault=function(){f.defaultPrevented=!0},f.setContainment=function(t){f.constrains=t.outerOffset(),f.container=t}}function w(){f.constrains=f.container.outerOffset(),f.innerX=f.iframe.x-f.constrains.left-f.initial.elementX,f.innerY=f.iframe.y-f.constrains.top-f.initial.elementY,f.virtual.top<f.constrains.top&&(f.innerY=0),f.virtual.right>f.constrains.right&&(f.innerX=f.constrains.width-f.virtual.width),f.virtual.bottom>f.constrains.bottom&&(f.innerY=f.constrains.height-f.virtual.height),f.virtual.left<f.constrains.left&&(f.innerX=0)}var x=this;g=angular.extend({cssProps:{},droppable:!0,broadcast:!0,start:angular.noop,move:angular.noop,end:angular.noop},g);var E=a||i.$element.get(0),_=new t.HammerJS(E,g);return _.get("pan").set({direction:t.HammerJS.DIRECTION_ALL,threshold:1}),angular.element(E).data("shortcode",i),angular.element(E).addClass("uxb-draggable"),_.on("hammer.input",m),_.on("panstart",v),_.on("pan",$),_.on("panend",b),_}}];e["default"]=s}).call(e,function(){return this}())},function(t,e,n){"use strict";function o(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var r=n(11),i=o(r),s=["store","$q",function a(t,e){function n(n,o,r){var i=e.defer(),s=0,a=0;return _.each(o,function(e,r){t.$get(n+"."+r+".loaded")===!0?delete o[r]:s++}),0===_.size(o)?(i.resolve(),i.promise):(_.each(o,function(e,o){function l(){c.loaded=!0,a++,a===s&&i.resolve()}var c=t.$get(n+"."+o)||r(e,o);return angular.isDefined(c.loaded)&&c.loaded!==!0?c.addEventListener("load",l):(c.loaded=!1,c.addEventListener("load",l),t.$set(n+"."+o,c),void document.getElementsByTagName("head")[0].appendChild(c))}),i.promise)}return(0,i["default"])(this,a),{injectStyles:function(t){return n("styles",t,function(t,e,n){return n=document.createElement("link"),n.id="ux-builder-style-"+e,n.rel="stylesheet",n.type="text/css",n.media="all",n.href=t,n})},injectScripts:function(t){return n("scripts",t,function(t,e,n){return n=document.createElement("script"),n.id="ux-builder-script-"+e,n.type="text/javascript",n.src=t,n})}}}];e["default"]=s},function(t,e,n){"use strict";function o(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var r=n(11),i=o(r),s=n(12),a=o(s),l=function(){function t(e){(0,i["default"])(this,t),this.enabled=!0,this.store=e,this.store.editor=this.store.editor||{state:{}}}return t.$inject=["store"],(0,a["default"])(t,[{key:"disable",value:function(){this.enabled=!1,this.state={}}},{key:"enable",value:function(){this.enabled=!0}},{key:"update",value:function(){}},{key:"outline",value:function(t){this.state.outlined=this.enabled?t:null}},{key:"select",value:function(t){this.state.selected=this.enabled?t:null}},{key:"configure",value:function(t){this.state.configuring=this.enabled?t:null}},{key:"target",value:function(t){this.state.target=this.enabled?t:null}},{key:"state",get:function(){return this.store.editor.state}}]),t}();e["default"]=l},function(t,e,n){(function(t){"use strict";function o(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var r=n(11),i=o(r),s=function a(){return(0,i["default"])(this,a),function(e,n,o){return o?t.propagatingHammer(new t.HammerJS(e,n)):new t.HammerJS(e,n)}};e["default"]=s}).call(e,function(){return this}())},function(t,e,n){"use strict";function o(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var r=n(11),i=o(r),s=n(12),a=o(s),l=n(43),c=o(l),u=function(){function t(e,n,o,r,s,a){(0,i["default"])(this,t),this.app=e,this.store=n,this.targets=o,this.manager=r,this.$timeout=s,this.metaOptions=n.post.meta.options.flat,this.postMeta=n.post.meta.values,this.IframeEvent=a}return t.$inject=["app","store","targets","Shortcode","$timeout","IframeEvent"],(0,a["default"])(t,[{key:"reload",value:function(t){var e=this;if(!this.store.isReloading){this.store.loading=!0;var n=(0,c["default"])(this.store.iframeUrl);for(var o in this.metaOptions){var r=this.metaOptions[o];n.query+="&"+r.$orgName+"="+this.postMeta[r.$name]}this.store.post.content=t||this.store.postContent.copy(),this.targets.remove(this.store.postContent),this.manager.remove(this.store.postContent),this.app.resetAll(),this.store.isReloading=!!this.$timeout(function(){e.store.iframeUrl=n.toString(),delete e.store.isReloading},0)}}}]),t}();e["default"]=u},function(t,e,n){"use strict";function o(t){var e=c.exec(t);return{protocol:e[1]?e[1].toLowerCase():"",slashes:!!e[2],rest:e[3]?e[3]:""}}function r(t,e,n){if(!(this instanceof r))return new r(t,e,n);var c,d,p,f,h,g=l.test(t),m=typeof e,v=this,$=0;for("object"!==m&&"string"!==m&&(n=e,e=null),n&&"function"!=typeof n&&(n=a.parse),e=s(e),h=o(t),v.protocol=h.protocol||e.protocol||"",v.slashes=h.slashes||e.slashes,t=h.rest;$<u.length;$++)d=u[$],c=d[0],f=d[1],c!==c?v[f]=t:"string"==typeof c?~(p=t.indexOf(c))&&("number"==typeof d[2]?(v[f]=t.slice(0,p),t=t.slice(p+d[2])):(v[f]=t.slice(p),t=t.slice(0,p))):(p=c.exec(t))&&(v[f]=p[1],t=t.slice(0,t.length-p[0].length)),v[f]=v[f]||(d[3]||"port"===f&&g?e[f]||"":""),d[4]&&(v[f]=v[f].toLowerCase());n&&(v.query=n(v.query)),i(v.port,v.protocol)||(v.host=v.hostname,v.port=""),v.username=v.password="",v.auth&&(d=v.auth.split(":"),v.username=d[0]||"",v.password=d[1]||""),v.origin=v.protocol&&v.host&&"file:"!==v.protocol?v.protocol+"//"+v.host:"null",v.href=v.toString()}var i=n(44),s=n(45),a=n(46),l=/^\/(?!\/)/,c=/^([a-z][a-z0-9.+-]*:)?(\/\/)?([\S\s]*)/i,u=[["#","hash"],["?","query"],["/","pathname"],["@","auth",1],[NaN,"host",void 0,1,1],[/:(\d+)$/,"port"],[NaN,"hostname",void 0,1,1]];r.prototype.set=function(t,e,n){var o=this;"query"===t?("string"==typeof e&&e.length&&(e=(n||a.parse)(e)),o[t]=e):"port"===t?(o[t]=e,i(e,o.protocol)?e&&(o.host=o.hostname+":"+e):(o.host=o.hostname,o[t]="")):"hostname"===t?(o[t]=e,o.port&&(e+=":"+o.port),o.host=e):"host"===t?(o[t]=e,/:\d+$/.test(e)?(e=e.split(":"),o.port=e.pop(),o.hostname=e.join(":")):(o.hostname=e,o.port="")):"protocol"===t?(o.protocol=e.toLowerCase(),o.slashes=!n):o[t]=e;for(var r=0;r<u.length;r++){var s=u[r];s[4]&&(o[s[1]]=o[s[1]].toLowerCase())}return o.origin=o.protocol&&o.host&&"file:"!==o.protocol?o.protocol+"//"+o.host:"null",o.href=o.toString(),o},r.prototype.toString=function(t){t&&"function"==typeof t||(t=a.stringify);var e,n=this,o=n.protocol;o&&":"!==o.charAt(o.length-1)&&(o+=":");var r=o+(n.slashes?"//":"");return n.username&&(r+=n.username,n.password&&(r+=":"+n.password),r+="@"),r+=n.host+n.pathname,e="object"==typeof n.query?t(n.query):n.query,e&&(r+="?"!==e.charAt(0)?"?"+e:e),n.hash&&(r+=n.hash),r},r.extractProtocol=o,r.location=s,r.qs=a,t.exports=r},function(t,e){"use strict";t.exports=function(t,e){if(e=e.split(":")[0],t=+t,!t)return!1;switch(e){case"http":case"ws":return 80!==t;case"https":case"wss":return 443!==t;case"ftp":return 21!==t;case"gopher":return 70!==t;case"file":return!1}return 0!==t}},function(t,e,n){(function(e){"use strict";var o,r=/^[A-Za-z][A-Za-z0-9+-.]*:\/\//,i={hash:1,query:1};
t.exports=function(t){t=t||e.location||{},o=o||n(43);var s,a={},l=typeof t;if("blob:"===t.protocol)a=new o(unescape(t.pathname),{});else if("string"===l){a=new o(t,{});for(s in i)delete a[s]}else if("object"===l){for(s in t)s in i||(a[s]=t[s]);void 0===a.slashes&&(a.slashes=r.test(t.href))}return a}}).call(e,function(){return this}())},function(t,e){"use strict";function n(t){for(var e,n=/([^=?&]+)=?([^&]*)/g,o={};e=n.exec(t);o[decodeURIComponent(e[1])]=decodeURIComponent(e[2]));return o}function o(t,e){e=e||"";var n=[];"string"!=typeof e&&(e="?");for(var o in t)r.call(t,o)&&n.push(encodeURIComponent(o)+"="+encodeURIComponent(t[o]));return n.length?e+n.join("&"):""}var r=Object.prototype.hasOwnProperty;e.stringify=o,e.parse=n},function(t,e,n){"use strict";function o(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var r=n(11),i=o(r),s=["app","store","utils",function a(t,e,n){function o(){return e.breakpoints["default"]}function r(){return e.breakpoints.current}function s(t,e){return e=e||r(),e>o()?c(t,e):d(t,e)}function l(t,e){return e=e||r(),e>o()?u(t,e):p(t,e)}function c(t,e){for(var n=e||r();n>=0;n--)if(t[n])return t[n];return null}function u(t,e){for(var n=e||r();n>=0;n--)if(t[n])return n;return 0}function d(t,e){for(var n=e||r();n<t.length;n++)if(t[n])return t[n];return null}function p(t,e){for(var n=e||r();n<t.length;n++)if(t[n])return n;return 0}function f(t,e,n){for(var o=e+1;o<n;o++)if(t[o])return!0;return!1}return(0,i["default"])(this,a),{defaultBreakpoint:o,currentBreakpoint:r,getMediaValue:s,getMediaIndex:l,getLowerMediaValue:c,getLowerMediaIndex:u,getHigherMediaValue:d,getHigherMediaIndex:p,hasValueBetween:f}}];e["default"]=s},function(t,e,n){"use strict";function o(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var r=n(11),i=o(r),s=n(12),a=o(s),l=n(49),c=o(l),u=function(){function t(e,n,o,r){(0,i["default"])(this,t),this.app=e,this.$timeout=n,this.$templateCache=o,this.ShortcodeEvent=r}return t.$inject=["app","$timeout","$templateCache","ShortcodeEvent"],(0,a["default"])(t,[{key:"instantiate",value:function(t,e,n){return new c["default"](t,e,n)}},{key:"create",value:function(t,e,n){var o=this,r=this.instantiate(t,e,n);return!r.isRoot&&r.data.template||this.$timeout(function(){o.app.trigger(o.ShortcodeEvent.ATTACHED,r)},0,!1),r}},{key:"move",value:function(t,e,n){var o=this,r=e.addChild(t,n);return t.$parentId!==r.$parentId&&this.app.trigger(this.ShortcodeEvent.DETACHED,t),this.$timeout(function(){t.$parentId!==r.$parentId&&r.data.template&&o.app.trigger(o.ShortcodeEvent.ATTACHED,r),o.app.trigger(o.ShortcodeEvent.MOVED,r)},0,!1),r}},{key:"duplicate",value:function(t){var e=this,n=arguments.length<=1||void 0===arguments[1]?null:arguments[1],o=!(arguments.length<=2||void 0===arguments[2])&&arguments[2],r=t.duplicate(n,o);return r.data.template||this.$templateCache.put(r.$id,this.$templateCache.get(t.$id)),this.$timeout(function(){e.app.trigger(e.ShortcodeEvent.ATTACHED,r)}),r}},{key:"remove",value:function(t){if(this.app.trigger(this.ShortcodeEvent.DETACHED,t),this.app.states.selectedShortcode===t&&(this.app.outlineShortcode(null),this.app.selectShortcode(null),this.app.configureShortcode(null)),t.isRoot)for(var e=t.children.length-1;e>=0;e--)t.children[e].remove();else t.remove()}}]),t}();e["default"]=u},function(t,e,n){"use strict";function o(t){return t&&t.__esModule?t:{"default":t}}function r(t,e){var n=Math.floor(65536*(1+Math.random())).toString(16).substring(1);return e?t.tag+"-"+n:"root"}function i(t,e){return null===t?t:"string"==typeof t&&""===t?t:isNaN(t)?angular.isUndefined(t)?e["default"]:(Array.isArray(t)&&(t=t.join(e.config?e.config.delimiter:",")),String(t)):Number(t)}function s(t){var e={};for(var n in t)"$"!==n.charAt(0)&&"children"!==n&&t.hasOwnProperty(n)&&(e[n]=angular.copy(t[n]));if(t.isParent){e.children=[];for(var o=0;o<t.children.length;o++)e.children.push(s(t.children[o]))}return e}function a(t){var e=null,n=angular.copy(t);if(angular.isDefined(n.children))for(var o in n.children)e=a($.store.shortcodes[n.children[o].tag].presets[0].content),n.children[o].isparent&&!n.children[o].children.length&&(n.children[o]=angular.merge({},e,n.children[o])),n.children[o].content&&""===n.children[o].content&&(n.children[o].content=e.content);return n}function l(t){var e=[];return t.children&&t.children.forEach(function(t){e.push(t),e.concat(l(t))}),e}function c(t){var e=arguments.length<=1||void 0===arguments[1]?$.store.breakpoints.current:arguments[1];return e>$.store.breakpoints["default"]?u(t,e):d(t,e)}function u(t){for(var e=arguments.length<=1||void 0===arguments[1]?$.store.breakpoints.current:arguments[1],n=e;n>=0;n--)if(null!==t[n])return t[n];return null}function d(t){for(var e=arguments.length<=1||void 0===arguments[1]?$.store.breakpoints.current:arguments[1],n=e;n<t.length;n++)if(null!==t[n])return t[n];return null}Object.defineProperty(e,"__esModule",{value:!0});var p=n(13),f=o(p),h=n(11),g=o(h),m=n(12),v=o(m),$=n(16),b=n(50),y=function(){function t(e,n,o){var s=this;(0,g["default"])(this,t),angular.merge(this,e);var a=this,l={},u={};this.$id=o||e.$id||r(e,n),this.$parentId=n?n.$id:null,this.data=angular.copy($.store.shortcodes[this.tag]),n&&angular.extend(this.data,n.data.children),this.states={},this.options={get $responsive(){return l}};for(var d in e.options.$responsive){l[d]=[];for(var p=0;p<e.options.$responsive[d].length;p++)l[d][p]=i(e.options.$responsive[d][p],a.data.options.named[d])}var h=function(t){return"$"===t.charAt(0)?"continue":((0,f["default"])(s.options,t,{enumerable:!0,get:function(){var e=a.data.options.named[t];return e.responsive?c(l[t]):u[t]},set:function(e){var n=a.data.options.named[t],o=i(e,n);if(u[t]=o,n.responsive){var r=$.store.breakpoints.current,s=c(l[t]);o!==s&&(l[t][r]=o)}}}),void(s.options[t]=e.options[t]))};for(var m in e.options){h(m)}$.store.shortcode[this.$id]=this,e.hasOwnProperty("children")&&(this.children=e.children.map(function(e){return new t(e,s)}))}return(0,v["default"])(t,[{key:"apply",value:function(){this.$scope&&!this.$scope.$$phase&&this.$scope.$apply()}},{key:"addChild",value:function(e,n){var o=void 0,r=void 0;if("undefined"==typeof e.$id||null===e.$id?o=new t(a(e),this):e.$parentId!==this.$id?o=new t(s(e.detatch()),this,e.$id):(n-=n>e.index?1:0,o=e.detatch()),!this.allows(o))throw Error(o.data.name+" is not allowed in "+this.data.name);return r=n>=0?n:this.children.length,this.children.splice(r,0,o),o}},{key:"childAt",value:function(t){return this.isParent?this.children[t]:null}},{key:"removeChild",value:function(t){return this.isParent?this.children[t].remove():null}},{key:"replaceChild",value:function(e,n){return this.isParent?(this.children[n]=e instanceof t?e:new t(e,this),this.children[n]):null}},{key:"replaceWith",value:function(t){return this.isRoot?null:this.parent.replaceChild(t,this.index)}},{key:"is",value:function(t){return this.data.tag===t}},{key:"isChildOf",value:function(t){return this.parent===t}},{key:"isDescendantOf",value:function(t){return t.descendants.indexOf(this)>-1}},{key:"isSelfOrDescendantOf",value:function(t){return t.descendantsAndSelf.indexOf(this)>-1}},{key:"isAncestorOf",value:function(t){return this.descendants.indexOf(t)>-1}},{key:"isSelfOrAncestorOf",value:function(t){return this.descendantsAndSelf.indexOf(t)>-1}},{key:"copy",value:function(){var t=arguments.length<=0||void 0===arguments[0]?null:arguments[0],e={};for(var n in this)_.isFunction(this[n])||"$"!==n.charAt(0)&&"children"!==n&&"data"!==n&&this.hasOwnProperty(n)&&(e[n]=angular.copy(this[n]));if(this.isParent){e.children=[];for(var o=0;o<this.children.length;o++)e.children.push(this.children[o].copy(t))}return t&&t(e,this),e}},{key:"duplicate",value:function(){var t=arguments.length<=0||void 0===arguments[0]?null:arguments[0],e=!(arguments.length<=1||void 0===arguments[1])&&arguments[1];return this.parent.addChild(this.copy(function(t,n){e&&(t.$id=n.$id)}),t||this.index+1)}},{key:"detatch",value:function(){return this.parent?this.parent.children.splice(this.index,1)[0]:null}},{key:"remove",value:function(){this.descendants.forEach(function(t){delete $.store.shortcode[t.$id]}),this.parent&&delete $.store.shortcode[this.$id],this.detatch()}},{key:"allows",value:function(t){return(0,b.isAllowed)(t,this)}},{key:"allowed",get:function(){return(0,b.allowedShortcodes)(this)}},{key:"presets",get:function(){var t=this.parent.allowed,e=angular.copy(this.data.presets);return e.forEach(function(n,o){var r=l(n.content);return r.unshift(n.content),t.hasOwnProperty(n.content.tag)?void r.forEach(function(t){t.tag===parent.tag&&$.store.shortcodes[t.tag].nested!==!0&&e.splice(o,1)}):e.splice(o,1)}),e}},{key:"isParent",get:function(){return!!this.children}},{key:"isChild",get:function(){return!!this.parent}},{key:"isEmpty",get:function(){return this.isParent&&0===this.children.length}},{key:"isRoot",get:function(){return"_root"===this.tag}},{key:"parent",get:function(){return this.$parentId?$.store.shortcode[this.$parentId]:null}},{key:"index",get:function(){return this.parent?this.parent.children.indexOf(this):0}},{key:"depth",get:function(){return this.ancestors.length}},{key:"ancestors",get:function(){var t=[];return this.parent&&(t.push(this.parent),t=t.concat(this.parent.ancestors)),t}},{key:"ancestorsAndSelf",get:function(){var t=this.ancestors;return t.unshift(this),t}},{key:"descendants",get:function(){var t=[];if(this.isParent)for(var e=0;e<this.children.length;e++)t.push(this.children[e]),t=t.concat(this.children[e].descendants);return t}},{key:"descendantsAndSelf",get:function(){var t=this.descendants;return t.unshift(this),t}},{key:"siblings",get:function(){var t=this;return this.parent?this.parent.children.filter(function(e){return e!==t}):[]}},{key:"nextSibling",get:function(){return this.parent&&this.parent.children[this.index+1]?this.parent.children[this.index+1]:null}},{key:"previousSibling",get:function(){return this.parent&&this.parent.children[this.index-1]?this.parent.children[this.index-1]:null}},{key:"siblingsAndSelf",get:function(){return this.parent?this.parent.children:[this]}}]),t}();e["default"]=y},function(t,e,n){"use strict";function o(t,e){return!e.isSelfOrDescendantOf(t)&&(!t.descendants.filter(function(t){return t.data.nested===!1&&t.tag===e.tag}).length&&e.allowed.hasOwnProperty(t.tag))}function r(t){var e=t.ancestorsAndSelf,n={};if(t.data.allow.length)return t.data.allow.reduce(function(t,e){return i.store.shortcodes[e]&&(t[e]=i.store.shortcodes[e]),t},{});var o=function(o){var r=i.store.shortcodes[o];return r.hidden?"continue":r.require.length&&r.require.indexOf(t.tag)===-1?"continue":r.nested===!1&&t.tag===r.tag?"continue":r.nested===!1&&e.filter(function(t){return t.tag===r.tag}).length?"continue":void(n[r.tag]=r)};for(var r in i.store.shortcodes){o(r)}return n}Object.defineProperty(e,"__esModule",{value:!0}),e.isAllowed=o,e.allowedShortcodes=r;var i=n(16)},function(t,e,n){"use strict";function o(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var r=n(11),i=o(r),s=n(12),a=o(s),l=function(){function t(e,n,o,r,s){var a=this;(0,i["default"])(this,t),this.store=e,this.$iframe=n,this.$timeout=s,o.addEventListener("resize",function(){return a.updateOffsets()}),o.addEventListener("scroll",function(){return a.updateOffsets()}),this.updateOffsets(!0,0)}return t.$inject=["store","$iframe","$window","$document","$timeout"],(0,a["default"])(t,[{key:"add",value:function(t,e){var n=angular.extend({name:t,element:e.shortcode.$element,shortcode:e.shortcode,target:e.target||"center"===t?e.shortcode:e.shortcode.parent,droppable:!0,addable:!0,active:!0},e);n.offsets=n.element.outerOffset(),this.store.targets.push(n)}},{key:"enable",value:function(t){var e=this;if(angular.isArray(t))return t.forEach(function(t){return e.enable(t)});for(var n=0;n<this.store.targets.length;n++)this.store.targets[n].target===t&&(this.store.targets[n].active=!0)}},{key:"disable",value:function(t){var e=this;if(angular.isArray(t))return t.forEach(function(t){return e.disable(t)});for(var n=0;n<this.store.targets.length;n++)this.store.targets[n].target===t&&(this.store.targets[n].active=!1)}},{key:"remove",value:function(t){var e=t.descendantsAndSelf;this.store.targets=this.store.targets.reduce(function(t,n){return e.indexOf(n.shortcode)<0&&t.push(n),t},[])}},{key:"removeElement",value:function(t){this.store.targets=this.store.targets.reduce(function(e,n){return n.element.get(0)!==t&&e.push(n),e},[])}},{key:"enableElement",value:function(t){for(var e=this,n=0;n<this.store.targets.length;n++)this.store.targets[n].element.get(0)===t&&(this.store.targets[n].active=!0,this.store.targets[n].shortcode.descendants.forEach(function(t){t.$element&&e.enableElement(t.$element.get(0))}))}},{key:"disableElement",value:function(t){for(var e=this,n=0;n<this.store.targets.length;n++)this.store.targets[n].element.get(0)===t&&(this.store.targets[n].active=!1,this.store.targets[n].shortcode.descendants.forEach(function(t){t.$element&&e.disableElement(t.$element.get(0))}))}},{key:"find",value:function(t,e){for(var n=!(arguments.length<=2||void 0===arguments[2])&&arguments[2],o=arguments.length<=3||void 0===arguments[3]?50:arguments[3],r=[],i=!!this.store.isDragging,s=0;s<this.store.targets.length;s++){var a=this.store.targets[s],l=a.element[0].ownerDocument.defaultView,c=t,u=e,d=void 0,p=void 0,f=void 0,h=void 0,g=void 0;if(a.active&&("center"!==a.name||a.shortcode.isEmpty)&&(!i||a.droppable)&&(i||a.addable)&&(i||l.frameElement))if(l){switch(l.frameElement&&angular.isDefined(this.frameOffsets)&&(c-=this.frameOffsets.left,u-=this.frameOffsets.top),a.name){case"top":g=a.shortcode.index,f=a.offsets.left+a.offsets.width/2,h=a.offsets.top,d=n?f:c,p=h;break;case"right":g=a.shortcode.index+1,f=a.offsets.right,h=a.offsets.top+a.offsets.height/2,d=a.offsets.right,p=n?h:u;break;case"bottom":g=a.shortcode.index+1,f=a.offsets.left+a.offsets.width/2,h=a.offsets.bottom,d=n?f:c,p=h;break;case"left":g=a.shortcode.index,f=a.offsets.left,h=a.offsets.top+a.offsets.height/2,d=f,p=n?h:u;break;case"center":g=0,f=f=a.offsets.left+a.offsets.width/2,h=h=a.offsets.top+a.offsets.height/2}var m={fromSide:Math.sqrt(Math.pow(Math.abs(d-c),2)+Math.pow(Math.abs(p-u),2)),fromCenter:Math.sqrt(Math.pow(Math.abs(f-c),2)+Math.pow(Math.abs(h-u),2))},v=a.shortcode.isEmpty,$=v?0:o,b=this.isInside(a,c,u,$),y=this.isInside(a,c,u),w=v?b:m.fromSide<$;b&&w&&r.push({target:a.target||("center"!==a.name?a.shortcode.parent:a.shortcode),insideLimit:b,insideElement:y,element:a.element,shortcode:a.shortcode,name:a.name,distance:m,index:g})}else this.removeElement(a.element.get(0))}return _.chain(r).sortBy(function(t){return-t.target.ancestors.length}).sortBy(function(t){return t.distance.fromCenter}).value()}},{key:"isInside",value:function(t,e,n){var o=arguments.length<=3||void 0===arguments[3]?0:arguments[3],r={x:o,y:o},i=Math.min(t.offsets.left-r.x,t.offsets.right+r.x),s=Math.max(t.offsets.left-r.x,t.offsets.right+r.x),a=Math.min(t.offsets.top-r.y,t.offsets.bottom+r.y),l=Math.max(t.offsets.top-r.y,t.offsets.bottom+r.y);return i<=e&&e<=s&&a<=n&&n<=l}},{key:"updateOffsets",value:function(){var t=this,e=!(arguments.length<=0||void 0===arguments[0])&&arguments[0],n=arguments.length<=1||void 0===arguments[1]?250:arguments[1];this.$timeout.cancel(this.store.__updateTargets),this.store.__updateTargets=this.$timeout(function(){t.frameOffsets=t.$iframe().get(0).getBoundingClientRect();for(var n=0;n<t.store.targets.length;n++){var o=t.store.targets[n];(e||o.active&&o.element[0].ownerDocument.defaultView===window)&&("center"===o.name&&o.shortcode.isEmpty&&o.shortcode.$content&&o.element[0].ownerDocument.defaultView.frameElement?o.offsets=o.shortcode.$content.outerOffset({includeMargins:!0}):o.element?o.offsets=o.element.outerOffset({includeMargins:!0}):t.store.remove(o.shortcode))}delete t.store.__updateTargets},n,!1)}}]),t}();e["default"]=l},function(t,e,n){"use strict";function o(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var r=n(11),i=o(r),s=["store","$document","$window","$iframe",function a(t,e,n,o){(0,i["default"])(this,a),this.arrayPrefix=function(t,e){return t.reduce(function(t,n){return t.push(""+e+n),t},[])},this.isIframe=function(){return!!n.frameElement},this.getGlobalCoordinates=function(t,e,n){if(t.frameElement){var o=t.frameElement.getBoundingClientRect();e+=o.left,n+=o.top}return{x:e,y:n}},this.camelCase=function(t,e){return t=e?t.charAt(0).toUpperCase()+t.slice(1):t,jQuery.camelCase(t.replace(/\_|\:/g,"-",!0))},this.kebabCase=function(t){return t.replace(/[A-Z\u00C0-\u00D6\u00D8-\u00DE]/g,function(t){return t.toLowerCase()})},this.elementFromPoint=function(t,e){var r=n.parent||n,i=r.document,s=o().get(0).contentWindow,a=o().get(0).contentDocument,l=t,c=e,u=o().get(0).getBoundingClientRect(),d=t-u.left,p=e-u.top,f=r.angular.element(i.elementFromPoint(l,c)),h=s.angular.element(a.elementFromPoint(d,p));return h.length?h:f},this.shortcodeFromPoint=function(e,n){return this.elementFromPoint(e,n).shortcode()||t.postContent}}];e["default"]=s},function(t,e,n){"use strict";function o(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var r=n(11),i=o(r),s=["$angular","$window",function a(t,e){return(0,i["default"])(this,a),function(){return t.element((e.parent.document||document).getElementsByTagName("iframe")[0])}}];e["default"]=s},function(t,e,n){"use strict";function o(t){return t&&t.__esModule?t:{"default":t}}var r=n(7),i=o(r),s=n(55),a=o(s);i["default"].controller("ShortcodeController",a["default"])},function(t,e,n){"use strict";function o(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var r=n(11),i=o(r),s=n(12),a=o(s),l=function(){function t(e,n,o,r,s,a,l,c,u){var d=this;(0,i["default"])(this,t),this.app=e,this.store=n,this.shortcode=o,this.targets=r,this.$scope=a;var p=!!o.data.draggable&&s(o);o.data.addableSpots.map(function(t){r.add(t,{shortcode:o})}),l.find("img").attr("draggable","false"),l.on("click",function(t){t.stopPropagation(),t.preventDefault(),n.isDragging||(e.configureShortcode(o),e.apply())}),this.onOptionsChanged(o.options,null,!0),a.$watchCollection(function(){return o.options},function(t,n){t!==n&&(d.app.trigger(u.CHANGED,{shortcode:o,options:t,oldOptions:n}),d.onOptionsChanged(t,n)),e.states.selectedShortcode===o&&d.app("tools").fixPositions()}),angular.isDefined(o.content)&&!function(){var t=!1;a.$watch(function(){return o.content},function(n,r){n!==r&&(c.cancel(t),t=c(function(){e.trigger("shortcode-content-change",o)},0,!1))})}(),a.$watch(function(){return e.states.selectedShortcode},function(t){l.toggleClass("uxb-selected",t===o)}),a.$on("$destroy",function(){r.remove(o),l.off("click"),p&&p.element&&p.destroy()})}return t.$inject=["app","store","shortcode","targets","draggable","$scope","$element","$timeout","ShortcodeEvent"],(0,a["default"])(t,[{key:"onOptionsChanged",value:function(t,e,n){var o=!1;for(var r in t)if("$"!==r.charAt(0)){var i=this.shortcode.data.options.named[r],s=e?e[r]:"",a=null===t[r]&&s===i["default"];if(n||!a&&t[r]!==s)if(i.onChange){var l=i.apply(this.shortcode.$element,t[r],s);o=o||!l}else o=!0}!this.shortcode.$noRecompile&&!this.shortcode.data.template&&o&&e&&e!==t&&this.$scope.$$recompile()}}]),t}();e["default"]=l},function(t,e,n){"use strict";function o(t){return t&&t.__esModule?t:{"default":t}}function r(t){var e=n(57);angular.forEach(e.keys(),function(n){t.put(n.replace("./",""),e(n))})}r.$inject=["$templateCache"];var i=n(7),s=o(i);s["default"].run(r)},function(t,e,n){function o(t){return n(r(t))}function r(t){return i[t]||function(){throw new Error("Cannot find module '"+t+"'.")}()}var i={"./components/add-shortcode/add-shortcode.html":58,"./components/app-actions/app-actions.html":59,"./components/app-sidebar/app-sidebar.html":60,"./components/app-tools/app-move-tool/app-move-tool.template.html":61,"./components/app-tools/app-resize-tool/app-resize-tool.template.html":62,"./components/app-tools/app-tools.html":63,"./components/context-menu/context-menu.template.html":64,"./components/shortcode-hierarchy-list-item/shortcode-hierarchy-list-item.html":65,"./components/ux-option/types/checkbox.html":66,"./components/ux-option/types/col-slider.html":67,"./components/ux-option/types/colorpicker.html":68,"./components/ux-option/types/gallery.html":69,"./components/ux-option/types/group.html":70,"./components/ux-option/types/image.html":71,"./components/ux-option/types/margins.html":72,"./components/ux-option/types/radio-buttons.html":73,"./components/ux-option/types/radio-images.html":74,"./components/ux-option/types/scrubfield.html":75,"./components/ux-option/types/select.html":76,"./components/ux-option/types/slider.html":77,"./components/ux-option/types/text-editor.html":78,"./components/ux-option/types/textfield.html":79,"./components/ux-option/types/title.html":80,"./components/ux-option/types/urlfield.html":81,"./routes/home/home.html":82,"./routes/settings/settings.html":83,"./routes/shortcode/shortcode.html":84,"./shortcodes/_loading.html":85};o.keys=function(){return Object.keys(i)},o.resolve=r,t.exports=o,o.id=57},function(t,e){t.exports='<div class="add-shortcode-selector">\n  <div class="add-shortcode-header">\n    <h2 class="title">Add Content</h2>\n    <nav class="add-shortcode-types">\n      <button type="button"\n        ng-click="$ctrl.showType(\'shortcodes\')"\n        ng-class="{ active: $ctrl.type === \'shortcodes\' }">\n        Elements\n      </button>\n      <!-- <button type="button"\n        ng-click="$ctrl.showType(\'components\')"\n        ng-class="{ active: $ctrl.type === \'components\' }">\n        Templates\n      </button>\n      <button type="button"\n        ng-click="$ctrl.showType(\'blocks\')"\n        ng-class="{ active: $ctrl.type === \'blocks\' }">\n        Blocks\n      </button> -->\n    </nav>\n  </div>\n\n  <!--<nav class="add-shortcode-categories">\n  <button type="button"\n  ng-click="$ctrl.showCategory()"\n  ng-class="{ active: !$ctrl.category }">\n  All\n  </button>\n  <button type="button"\n  ng-repeat="category in $ctrl.categories"\n  ng-class="{ active: $ctrl.category === category }"\n  ng-click="$ctrl.showCategory(category)">\n  {{:: category }}\n  </button>\n  </nav> -->\n\n  <div class="add-shortcode-items">\n    <input class="filter-elements" type="text" placeholder="Search&hellip;" ng-model="$ctrl.filter.name">\n\n    <div class="add-shortcode-category"\n      ng-repeat="category in $ctrl.items"\n      ng-show="items.length">\n      <h3>{{:: category.name }}</h3>\n      <ul>\n        <li ng-repeat="item in items = (category.items | filter: $ctrl.filter)">\n          <button type="button" ng-click="$ctrl.add(item, 0)">\n            <img ng-if="item.thumbnail" ng-src="{{:: item.thumbnail }}" alt="{{:: item.name }}"/>\n            <span class="title">{{:: item.name }}</span>\n          </button>\n        </li>\n      </ul>\n    </div>\n  </div>\n</div>\n\n<div class="add-shortcode-presets">\n  <h3>Presets</h3>\n  <ul>\n    <li ng-class="{ active : $ctrl.currentPreset === $index }"\n      ng-repeat="preset in $ctrl.presets track by preset.name">\n      <button type="button"\n        title="{{:: preset.name }}"\n        ng-class="{ \'with-thumbnail\' : !!preset.thumbnail }"\n        ng-click="$ctrl.usePreset(preset.content); $ctrl.currentPreset = $index">\n        <img ng-if="preset.thumbnail" ng-src="{{:: preset.thumbnail }}" alt="{{:: preset.name }}">\n        <span class="title">{{:: preset.name }}</span>\n      </button>\n    </li>\n  </ul>\n  <button\n    type="button"\n    class="wp-style alt button-large button-block"\n    ng-click="$ctrl.stack.close()">\n    Apply\n  </button>\n</div>\n'},function(t,e){t.exports='<button type="button"\n    title="Undo"\n    class="blank has-tooltip"\n    ng-click="$ctrl.undo()">\n    <span class="dashicons dashicons-arrow-left-alt2"></span>\n    <div class="uxb-tooltip">Undo (Coming soon)</div>\n</button>\n\n<button type="button"\n    title="Redo"\n    class="blank has-tooltip"\n    ng-click="$ctrl.redo()">\n    <span class="dashicons dashicons-arrow-right-alt2"></span>\n    <div class="uxb-tooltip">Redo (Coming soon)</div>\n</button>\n\n<hr>\n\n<button type="button"\n    class="blank has-tooltip"\n    title="{{:: breakpoint.title }}"\n    ng-click="$ctrl.setBreakpoint($index)"\n    ng-class="{ \'active\' : $ctrl.isActiveBreakpont($index) }"\n    ng-repeat="(name, breakpoint) in $ctrl.breakpoints.all track by breakpoint.width">\n    <span class="{{:: breakpoint.icon }}"></span>\n    <div class="uxb-tooltip">{{:: breakpoint.title }}</div>\n    <div class="has-breakpoint-values" ng-if="$ctrl.hasBreakpointValues($index)"></div>\n</button>\n\n<hr>\n\n<button type="button"\n    class="blank has-tooltip"\n    ng-click="$ctrl.zoomIn()">\n    <span class="dashicons dashicons-plus"></span>\n    <div class="uxb-tooltip">Zoom In (Coming soon)</div>\n</button>\n\n<button type="button"\n    class="blank has-tooltip"\n    ng-click="$ctrl.zoomOut()">\n    <span class="dashicons dashicons-minus"></span>\n    <div class="uxb-tooltip">Zoom Out (Coming soon)</div>\n</button>\n\n<hr>\n\n<button type="button"\n    class="blank has-tooltip"\n    title="{{:: action.tooltip }}"\n    ng-click="$ctrl.doAction(action)"\n    ng-repeat="action in $ctrl.actions">\n    <span class="{{:: action.icon }}"></span>\n    <div class="uxb-tooltip">{{:: action.tooltip }}</div>\n</button>\n\n<hr>\n<!--\n<button class="blank active">EN</button>\n<button class="blank">DK</button>\n<button class="blank">FI</button> -->\n'},function(t,e){t.exports='<app-sidebar-main class="animate-{{ $ctrl.routeAnimation }}">\n\n  <div class="title-row sidebar-top">\n  \t<div class="title-row-icon">\n\t  \t<button type="button" title="Exit Builder" class="blank" ng-click="$ctrl.app.exit()">\n\t   \t \t<span class="dashicons dashicons-no-alt"></span>\n\t\t  </button>\n  \t</div>\n  \t<div class="title-row-title">\n      {{ $ctrl.store.post.attributes.values.post_title }}\n    </div>\n  \t<div class="title-row-actions">\n  \t\t<button type="button" class="blank" ng-click="$ctrl.app.goto(\'/settings\')">\n\t      <span class="dashicons dashicons-admin-generic"></span>\n\t    </button>\n  \t</div>\n  </div><!-- Sidbar top -->\n\n  <div ui-view></div>\n\n</app-sidebar-main>\n'},function(t,e){t.exports='<div class="uxb-move">\n  <div class="uxb-move-handle"\n    ng-if="$ctrl.shortcode"\n    ng-class="$ctrl.classNames($ctrl.shortcode)"\n    draggable-shortcode="$ctrl.shortcode">\n    <span class="uxb-move-icon dashicons dashicons-move"></span>\n  </div>\n</div>\n'},function(t,e){t.exports='<div class="uxb-resize uxb-resize-top"></div>\n<div class="uxb-resize uxb-resize-right"></div>\n<div class="uxb-resize uxb-resize-bottom"></div>\n<div class="uxb-resize uxb-resize-left"></div>\n'},function(t,e){t.exports='<app-outline-tool class="auto-size" shortcode="$ctrl.outlined"></app-outline-tool>\n<app-resize-tool class="auto-size" shortcode="$ctrl.outlined"></app-resize-tool>\n<app-move-tool class="auto-size" shortcode="$ctrl.outlined"></app-move-tool>\n<app-select-tool class="auto-size" shortcode="$ctrl.selected"></app-select-tool>\n<add-buttons></add-buttons>\n\n<div class="tools-addable">\n  <div class="line"></div>\n  <add-button\n    class="button"\n    index="$ctrl.index"\n    shortcode="$ctrl.addable">\n  </add-button>\n</div>\n'},function(t,e){t.exports='<div class="context-menu-menu" ng-click="$ctrl.hide()">\n  <shortcode-actions shortcode="$ctrl.shortcode"></shortcode-actions>\n</div>\n'},function(t,e){t.exports='<div class="hierarchy-title" ng-class="{ \'active\' : $ctrl.isActive() }">\n\n    <button type="button" class="hierarchy-toggle"\n        ng-if="$ctrl.shortcode.children"\n        ng-click="$ctrl.toggleChildren()">\n    </button>\n\n    <div class="hierarchy-name"\n        ng-click="$ctrl.selectShortcode()"\n        ng-mouseover="$ctrl.outlineShortcode()"\n        ng-dblclick="$ctrl.configureShortcode()">\n\n        {{:: $ctrl.shortcode.data.name }}\n\n        <span class="hierarchy-info" ng-bind="$ctrl.getShortcodeInfo()"></span>\n    </div>\n\n    <div class="hierarchy-tools">\n      <button type="button blank" ng-click="$ctrl.showContextMenu($event)">\n        <span class="dashicons dashicons-admin-generic"></span>\n      </button>\n    </div>\n</div>\n\n<shortcode-hierarchy-list\n  ng-if="$ctrl.shortcode.states.open"\n  ng-class="{ \'open\': $ctrl.shortcode.states.open }"\n  shortcode="$ctrl.shortcode">\n</shortcode-hierarchy-list>\n'},function(t,e){t.exports='<label>\n  <input type="checkbox"\n    ng-model="$ctrl.model"\n    ng-true-value="\'true\'"\n    ng-false-value="\'0\'">\n  <span></span>\n</label>\n'},function(t,e){t.exports='<div class="col-slider-wrap col-slider-cols-{{ $ctrl.model }}">\n\n\t<table class="col-slider-table">\n\t\t<tbody>\n\t\t\t<tr>\n\t\t\t\t<td ng-repeat="n in _.range($ctrl.option.min, $ctrl.option.max + 1) track by $index">{{:: n }}</td>\n\t\t\t</tr>\n\t\t</tbody>\n\t</table>\n\n\t<input type="range"\n\t\tclass="col-slider-input"\n    min="{{:: $ctrl.option.min }}"\n    max="{{:: $ctrl.option.max }}"\n    ng-model="$ctrl.model">\n</div>\n'},function(t,e){t.exports='<ux-option-colorpicker\n  option="$ctrl.option"\n  model="$ctrl.model"\n></ux-option-colorpicker>\n\n<div ng-if="$ctrl.option.helpers" class="option-helpers option-helpers-colors">\n  <a href="javascript:"\n    title="Remove"\n    ng-click="$ctrl.model = null">\n    <span class="dashicons dashicons-no-alt"></span>\n  </a>\n  <a href="javascript:"\n    title="{{:: value.title }}"\n    style="background-color: {{:: value.value }}"\n    ng-repeat="(key, value) in $ctrl.option.helpers"\n    ng-click="$ctrl.model = value.value">\n  </a>\n</div>\n'},function(t,e){t.exports='<ux-option-gallery\n  option="$ctrl.option"\n  model="$ctrl.model"\n></ux-option-gallery>\n'},function(t,e){t.exports='<ux-option-group\n  option="$ctrl.option"\n  shortcode="$ctrl.shortcode"\n  responsive="$ctrl.$optionsCtrl.responsive"\n  model="$ctrl.$optionsCtrl.model"\n></ux-option-group>\n'},function(t,e){t.exports='<ux-option-image\n  option="$ctrl.option"\n  model="$ctrl.model"\n></ux-option-image>\n'},function(t,e){t.exports='<ux-option-margins\n  class="flex-options"\n  option="$ctrl.option"\n  model="$ctrl.model"\n></ux-option-margins>\n'},function(t,e){t.exports='<div class="option-button-group">\n\t<label ng-repeat="(value, data) in $ctrl.option.options"\n\t    ng-class="{ \'active\' : $ctrl.model === value }">\n\t    <input type="radio" value="{{:: value }}" ng-model="$ctrl.model"/>\n\t    <button type="button blank" title="{{:: data.title }}">\n\t    \t<span ng-if="data.icon" class="dashicons {{:: data.icon }}"></span>\n\t    \t<span ng-if="!data.icon"> {{:: data.title }}</span>\n\t    </button>\n\t</label>\n</div>\n'},function(t,e){t.exports='<label ng-repeat="(key, value) in $ctrl.option.options"\n    ng-class="{ \'active\' : $ctrl.model === key }">\n    <input type="radio" value="{{:: key }}" ng-model="$ctrl.model">\n    <img src="{{:: value.image }}" alt="{{:: value.title }}" title="{{:: value.title }}">\n</label>\n'},function(t,e){t.exports='<input type="text"\n  class="scrubfield"\n\tscrubfield="$ctrl.option"\n\tng-model="$ctrl.model"\n\tplaceholder="{{:: $ctrl.option.default }}"\n\tng-model-options="{\n        \'updateOn\': \'blur default\',\n        \'debounce\': {\n            \'blur\' : 0,\n            \'default\': 10\n        }\n    }">\n<div ng-if="$ctrl.option.helpers" class="option-helpers">\n\t<a \tng-repeat="(key, value) in $ctrl.option.helpers" href="javascript:"\n\t\tng-click="$ctrl.model = value.value">\n\t\t{{:: value.title }}\n\t</a>\n</div>\n'},function(t,e){t.exports='<ux-option-select\n  option="$ctrl.option"\n  value="$ctrl.model"\n></ux-option-select>\n'},function(t,e){t.exports='<div class="slider-wrap">\n\n  <input type="range"\n    min="{{:: $ctrl.option.min }}"\n    max="{{:: $ctrl.option.max }}"\n    step="{{:: $ctrl.option.step }}"\n    ng-model="$ctrl.model">\n\n  <input type="number" to-number\n    min="{{:: $ctrl.option.min }}"\n    max="{{:: $ctrl.option.max }}"\n    ng-model="$ctrl.model">\n\n  <span class="slider-unit">{{:: $ctrl.option.unit }}</span>\n\n</div>\n';
},function(t,e){t.exports='<div class="option-text-editor">\n  <button type="button" class="open-editor wp-style alt"\n    ng-click="$ctrl.app(\'stack\').openTextEditor($ctrl.app.states.selectedShortcode)">\n    Open Text Editor\n  </button>\n  <textarea class="raw-text"\n    ng-model="$ctrl.app.states.selectedShortcode.content">\n  </textarea>\n</div>\n'},function(t,e){t.exports='  <input type="text"\n    placeholder="{{::$ctrl.option.placeholder }}"\n    ng-model="$ctrl.model"\n    ng-model-options="{\n        updateOn: \'blur default\',\n        debounce: {\n            blur : 0,\n            default: 10\n        }\n    }">\n'},function(t,e){t.exports="{{:: $ctrl.option.heading }}\n"},function(t,e){t.exports='<ux-option-urlfield option="$ctrl.option"></ux-option-urlfield>\n'},function(t,e){t.exports='<app-sidebar-view class="home-view">\n\n  <view-header>\n\n  </view-header>\n\n  <view-body>\n    <shortcode-hierarchy-list shortcode="$ctrl.store.postContent"></shortcode-hierarchy-list>\n  </view-body>\n\n  <view-footer>\n    <button id="app-save-button" type="button"\n      class="wp-style alt button-large button-block"\n      ng-class="{ \'loading\': $ctrl.store.isSaving }"\n      ng-click="$ctrl.save()">\n      {{ $ctrl.saveButtonText }}\n    </button>\n    <button id="app-save-button" type="button"\n      class="wp-style button-large button-block button-exit animate-fade-in-right"\n      ng-if="$ctrl.store.isSaved"\n      ng-click="$ctrl.app.exit()">\n      &times;\n    </button>\n  </view-footer>\n\n</app-sidebar-view>\n'},function(t,e){t.exports='<app-sidebar-view class="settings-view">\n\n  <view-header>\n    <div class="title-row">\n      <div class="title-row-icon">\n          <button class="button-reset view-header-title" type="button" ng-click="$ctrl.   exit()">\n               <span class="dashicons dashicons-arrow-left-alt2"></span>\n          </button>\n      </div>\n      <div class="title-row-title"> Post settings </div>\n    </div>\n  </view-header>\n\n  <view-body>\n    <ux-options\n      options="$ctrl.post.attributes.options.tree"\n      model="$ctrl.post.attributes.values">\n    </ux-options>\n    <ux-options\n      options="$ctrl.post.meta.options.tree"\n      model="$ctrl.post.meta.values">\n    </ux-options>\n    <div class="box">\n      <h3 class="box-title">Clear post content</h3>\n      <div class="box-content">\n        <button class="wp-style danger button-block" ng-click="$ctrl.clearContent()">Clear&hellip;</button>\n      </div>\n    </div>\n  </view-body>\n\n  <view-footer>\n    <button type="button" class="wp-style blank" ng-click="$ctrl.discard()">\n      <span class="dashicons dashicons-no-alt"></span>Discard\n    </button>\n    <button type="button" class="wp-style" ng-click="$ctrl.exit()">\n      <span class="dashicons dashicons-yes"></span>Apply\n    </button>\n  </view-footer>\n\n</app-sidebar-view>\n'},function(t,e){t.exports='<app-sidebar-view class="shortcode-view">\n\n  <view-header>\n    <div class="title-row">\n      <div class="title-row-icon">\n         <button class="button-reset view-header-title" type="button" ng-click="$ctrl.exit(\'/\')">\n             <span class="dashicons dashicons-arrow-left-alt2"></span>\n         </button>\n      </div>\n      <div class="title-row-title"> {{ $ctrl.shortcode.data.name }} </div>\n      <div class="title-row-actions"></div>\n    </div>\n  </view-header>\n\n  <view-body>\n    <ux-options\n      options="$ctrl.options"\n      shortcode="$ctrl.shortcode"\n      responsive="$ctrl.responsiveValues"\n      model="$ctrl.shortcode.options">\n    </ux-options>\n  </view-body>\n\n  <view-footer>\n    <button type="button" class="wp-style" ng-click="$ctrl.discard()">\n      <span class="dashicons dashicons-no-alt"></span>Discard\n    </button>\n    <button type="button" class="wp-style alt" ng-click="$ctrl.exit()">\n      <span class="dashicons dashicons-yes"></span>Apply\n    </button>\n  </view-footer>\n\n</app-sidebar-view>\n'},function(t,e){t.exports='<div class="uxb-template-loading">Loading&hellip;</div>\n'},function(t,e,n){"use strict";function o(t){return t&&t.__esModule?t:{"default":t}}var r=n(11),i=o(r),s=n(12),a=o(s),l=n(7),c=o(l),u=function(){function t(e,n,o){(0,i["default"])(this,t),this.app=e,this.$scope=n,o.toggleClass("with-label",!!this.label)}return t.$inject=["app","$scope","$element"],(0,a["default"])(t,[{key:"addShortcode",value:function(){this.app.outlineShortcode(null),this.app.selectShortcode(null),this.app.configureShortcode(null),this.app("stack").open('\n      <add-shortcode\n        shortcode="$ctrl.shortcode"\n        index="$ctrl.index"\n      ></add-shortcode>\n    ',this.$scope)}}]),t}();c["default"].component("addButton",{controller:u,bindings:{shortcode:"<",label:"@",index:"<"},template:'\n    <button type="button" ng-click="$ctrl.addShortcode()">\n      <div class="wrapper">\n        <span class="icon">+</span>\n        <span class="label">{{:: $ctrl.label }}</span>\n      </div>\n    </button>\n  '})},function(t,e,n){"use strict";function o(t){return t&&t.__esModule?t:{"default":t}}var r=n(7),i=o(r),s=n(88),a=o(s),l=n(62),c=o(l);i["default"].component("appResizeTool",{controller:a["default"],template:c["default"],bindings:{shortcode:"<"}})},function(t,e,n){(function(t){"use strict";function o(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var r=n(11),i=o(r),s=n(12),a=o(s),l=n(89),c={top:{},right:{},bottom:{},left:{}},u=function(){function e(n,o,r,s,a,u){var d=this;(0,i["default"])(this,e),this.app=n,this.store=o,this.utils=r,this.$timeout=s,this.$element=u,this.shortcode=null;for(var p in c)c[p].$element=u.find(".uxb-resize-"+p),c[p].draggable=new t.HammerJS(c[p].$element.get(0),{edge:p}),c[p].draggable.get("pan").set({direction:(0,l.getPanDirection)(p)}),c[p].draggable.on("hammer.input",this.onHammerInput.bind(this)),c[p].draggable.on("panstart",this.onPanStart.bind(this)),c[p].draggable.on("pan",this.onPanMove.bind(this)),c[p].draggable.on("panend",this.onPanEnd.bind(this));a.$watch(function(){return n.states.outlinedShortcode},function(t){if(!d.app.states.resizingShortcode){if(!t)return u.removeClass("uxb-is-active");var e=(0,l.getShortcodeWithResize)(t),n=!!e&&e.data.resize!==!1;for(var o in c){var r=n&&angular.isArray(e.data.resize)&&e.data.resize.indexOf(o)>-1,i=n&&e.data.resize===!0;c[o].$element.toggleClass("uxb-is-active",r||i)}u.toggleClass("uxb-is-active",n),u.cover(n?e.$element:null),d.shortcode=e}}),a.$on(Event.CHANGE,function(){d.shortcode&&u.cover(d.shortcode.$element)})}return e.$inject=["app","store","utils","$timeout","$scope","$element"],(0,a["default"])(e,[{key:"onHammerInput",value:function(t){t.srcEvent.stopPropagation(),t.srcEvent.stopImmediatePropagation(),this.app.states.resizingShortcode=this.shortcode,this.store.isDragging=!0}},{key:"onPanStart",value:function(e){e.edge=(0,l.getEdgeName)(c,e.target),angular.element("body").addClass("uxb-is-resizing-"+e.edge),(0,l.runResizeHandler)(this.app.states.resizingShortcode,"onResize"+t.capitalize(e.edge)+"Start",e),(0,l.runResizeHandler)(this.app.states.resizingShortcode,"onResizeStart",e),this.app.outlineShortcode(null),this.app("tools").hideAddableSpot(),this.app("tools").apply(),this.app.states.resizingShortcode.$scope.$digest()}},{key:"onPanMove",value:function(e){e.edge=(0,l.getEdgeName)(c,e.target),(0,l.runResizeHandler)(this.app.states.resizingShortcode,"onResize"+t.capitalize(e.edge)+"Move",e),(0,l.runResizeHandler)(this.app.states.resizingShortcode,"onResizeMove",e),this.app("tools").apply(),this.app.states.resizingShortcode.$scope.$digest(),this.$element.cover(this.app.states.resizingShortcode.$element)}},{key:"onPanEnd",value:function(e){var n=this;e.edge=(0,l.getEdgeName)(c,e.target),angular.element("body").removeClass("uxb-is-resizing-"+e.edge),(0,l.runResizeHandler)(this.app.states.resizingShortcode,"onResize"+t.capitalize(e.edge)+"End",e),(0,l.runResizeHandler)(this.app.states.resizingShortcode,"onResizeEnd",e),this.$timeout(function(){n.app.states.resizingShortcode=null,n.store.isDragging=!1},0)}}]),e}();e["default"]=u}).call(e,function(){return this}())},function(t,e){(function(t){"use strict";function n(t){for(var e=t.ancestorsAndSelf,n=0;n<e.length;n++)if(e[n].data.resize)return e[n];return null}function o(t,e,n){angular.isDefined(t.$scope.$customCtrl)&&angular.isFunction(t.$scope.$customCtrl[e])&&t.$scope.$customCtrl[e](n)}function r(e){var n=t.HammerJS.DIRECTION_ALL;switch(e){case"top":n=t.HammerJS.DIRECTION_VERTICAL;break;case"right":n=t.HammerJS.DIRECTION_HORIZONTAL;break;case"bottom":n=t.HammerJS.DIRECTION_VERTICAL;break;case"left":n=t.HammerJS.DIRECTION_HORIZONTAL}return n}function i(t,e){for(var n in t)if(t[n].$element.get(0)===e)return n;return null}Object.defineProperty(e,"__esModule",{value:!0}),e.getShortcodeWithResize=n,e.runResizeHandler=o,e.getPanDirection=r,e.getEdgeName=i}).call(e,function(){return this}())},function(t,e,n){"use strict";function o(t){return t&&t.__esModule?t:{"default":t}}var r=n(7),i=o(r),s=n(91),a=o(s),l=n(61),c=o(l);i["default"].component("appMoveTool",{controller:a["default"],template:c["default"],bindings:{shortcode:"<"}})},function(t,e,n){"use strict";function o(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var r=n(11),i=o(r),s=n(12),a=o(s),l=n(92),c=function(){function t(e,n,o,r,s,a){var c=this;(0,i["default"])(this,t),this.app=e,this.store=n,this.utils=o,this.$timeout=r,this.$element=a,this.shortcode=null,s.$watch(function(){return e.states.outlinedShortcode},function(t){if(!t)return a.removeClass("uxb-is-active");var e=(0,l.getShortcodeWithMove)(t),n=!!e&&e.data.move!==!1;a.toggleClass("uxb-is-active",n),a.cover(n?e.$element:null),c.shortcode=e}),s.$on(Event.CHANGE,function(){c.shortcode&&a.cover(c.shortcode.$element)})}return t.$inject=["app","store","utils","$timeout","$scope","$element"],(0,a["default"])(t,[{key:"classNames",value:function(t){return this.utils.arrayPrefix(angular.isArray(t.data.move)?t.data.move:[t.data.move],"uxb-is-")}}]),t}();e["default"]=c},function(t,e){"use strict";function n(t){for(var e=t.ancestorsAndSelf,n=0;n<e.length;n++)if(e[n].data.move)return e[n];return null}Object.defineProperty(e,"__esModule",{value:!0}),e.getShortcodeWithMove=n},function(t,e,n){"use strict";function o(t){return t&&t.__esModule?t:{"default":t}}var r=n(11),i=o(r),s=n(12),a=o(s),l=n(7),c=o(l),u=function(){function t(e,n,o,r){var s=this;(0,i["default"])(this,t),this.buttons=[],this.shortcode=null,n.$watch(function(){return e.states.outlinedShortcode},function(t){return t?(s.shortcode=s.getShortcodeWithButtons(t),o.toggleClass("active",!!s.shortcode),void o.cover(s.shortcode?s.shortcode.$element:null)):o.removeClass("active")}),n.$on(r.CHANGE,function(){s.shortcode&&o.cover(s.shortcode.$element)})}return t.$inject=["app","$scope","$element","Event"],(0,a["default"])(t,[{key:"getShortcodeWithButtons",value:function(t){for(var e=t.ancestorsAndSelf,n=0;n<e.length;n++)if(e[n].data.addButtons)return e[n];return null}},{key:"getIndex",value:function(t){var e=0;return"right-center"!==t&&"bottom-right"!==t&&"bottom-center"!==t&&"bottom-left"!==t||(e=this.shortcode.children.length),e}}]),t}();c["default"].component("addButtons",{controller:u,template:'\n    <div class="add-buttons">\n      <add-button\n        class="{{:: button }}"\n        shortcode="$ctrl.shortcode"\n        index="$ctrl.getIndex(button)"\n        data-tooltip="{{:: $ctrl.shortcode.data.message }}"\n        ng-repeat="button in $ctrl.shortcode.data.addButtons">\n      </add-button>\n    </div>\n  '})},function(t,e,n){"use strict";function o(t){return t&&t.__esModule?t:{"default":t}}var r=n(7),i=o(r),s=n(95),a=o(s);i["default"].component("appTools",{controller:a["default"],template:n(63)})},function(t,e,n){"use strict";function o(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var r=n(11),i=o(r),s=["app","store","$scope","$element","$window","$compile","$angular","$timeout","$iframe","utils","Event","AppEvent","DragEvent","IframeEvent","ShortcodeEvent",function a(t,e,n,o,r,s,l,c,u,d,p,f,h,g,m){(0,i["default"])(this,a);var v=this,$={},b=l.element("app").find(".tools-addable"),y=o.find(".tools-addable");v.target=null,v.$targetElement=null,v.addable=null,t.register("tools",v),_.each(e.tools,function(t,e){var r=snakeCase(e,"-"),i="<"+r+' shortcode="shortcode"></'+r+">";s(i)(n,function(e,n){c(function(){t.$element=e,t.$ctrl=n.$$childHead.$ctrl,o.append(e)},0,!1)})}),u().on(g.CHANGED,function(){r.requestAnimationFrame(v.fixPositions)}),u().on(g.RESIZE,function(){r.requestAnimationFrame(v.fixPositions)}),u().on(g.SCROLL,function(){}),n.$on(m.CHANGED,function(){return v.fixPositions()}),n.$on(m.DELETED,function(){return v.hide()}),n.$on(g.RELOAD,function(){return v.hide()}),n.$on(h.MOVE,function(e,n){n.defaultPrevented?(t.outlineShortcode(null),v.hideAddableSpot()):t.outlineShortcode(n.isWithin?n.target.parent():null)}),n.$on(h.END,function(){v.hideAddableSpot(),v.fixPositions()}),v.apply=function(){n.$digest()};var w=!1;v.fixPositions=function(){c.cancel(w),w=c(function(){for(var t in $)$[t].$tool.hasClass("active")&&$[t].$tool.cover($[t].$element);v.$targetElement&&v.getAddableElement().cover(v.$targetElement),n.$broadcast(p.CHANGE)},0)},v.addTool=function(t,e,r){$.hasOwnProperty(t)&&v.removeTool(t),$[t]={},$[t].$element=r,$[t].$scope=n.$new(),$[t].$tool=s(e)($[t].$scope),o.append($[t].$tool)},v.getTool=function(t){var e=$[t],n={};return n.element=function(){return e.$element},n.scope=function(){return e.$scope.$$childHead},n.tool=function(){return e.$tool},n},v.showTool=function(t){$[t].$tool.addClass("active"),$[t].$tool.cover($[t].$element)},v.hideTool=function(t){$[t].$tool.removeClass("active")},v.removeTool=function(t){$[t].$element=null,$[t].$scope.$destroy(),$[t].$tool.remove(),$[t].$tool=null,delete $[t]},v.hide=function(){v.hideAddableSpot()},v.getAddableElement=function(){return v.$targetElement&&v.$targetElement.get(0).ownerDocument.defaultView.frameElement?(b.removeClass("active"),y):(y.removeClass("active"),b)},v.showAddableSpot=function(e){var n=arguments.length<=1||void 0===arguments[1]||arguments[1];return!e||t.states.freezed?v.hideAddableSpot():(v.toggleAddableButton(n),v.target=e,v.addable=e.target,v.index=e.index,v.$targetElement=v.target.shortcode.isEmpty&&v.target.element[0].ownerDocument.defaultView.frameElement&&"center"===v.target.name?v.target.shortcode.$content:v.target.element,v.getAddableElement().toggleClass("is-empty","center"===e.name),v.getAddableElement().toggleClass("is-left","left"===e.name),v.getAddableElement().toggleClass("is-right","right"===e.name),v.getAddableElement().toggleClass("is-top","top"===e.name),v.getAddableElement().toggleClass("is-bottom","bottom"===e.name),v.getAddableElement().toggleClass("is-deputy",v.target.element!==v.target.shortcode.$element),void v.getAddableElement().cover(v.$targetElement,{includeMargins:!0}).addClass("active"))},v.toggleAddableButton=function(t){v.getAddableElement().toggleClass("no-button",t===!1)},v.hideAddableSpot=function(){return v.getAddableElement().removeClass("active"),v.$targetElement=null,v.target=null,!1},v.addShortcode=function(){t("addables").open(v.addable,v.index),v.target=null,v.addable=null,v.index=null}}];e["default"]=s},function(t,e,n){"use strict";function o(t){return t&&t.__esModule?t:{"default":t}}var r=n(11),i=o(r),s=n(7),a=o(s),l=["app","$scope","$element","Event",function c(t,e,n,o){(0,i["default"])(this,c);var r=n.find(".name");e.$watch(function(){return t.states.outlinedShortcode},function(t){return t?(r.text(t.data.name),n.toggleClass("active",t.$element.isVisible()),void n.cover(t.$element)):n.removeClass("active")}),e.$on(o.CHANGE,function(){t.states.outlinedShortcode&&n.cover(t.states.outlinedShortcode.$element)})}];l.$inject=["app","$scope","$element","Event"],a["default"].component("appOutlineTool",{controller:l,template:'\n    <div class="wrapper">\n      <h3 class="name"></h3>\n    </div>\n  '})},function(t,e,n){"use strict";function o(t){return t&&t.__esModule?t:{"default":t}}var r=n(11),i=o(r),s=n(12),a=o(s),l=n(7),c=o(l),u=function(){function t(e,n,o,r,s){var a=this;(0,i["default"])(this,t),this.app=o,this.shortcode=null,e.$watch(function(){return o.states.selectedShortcode},function(t){return t?(a.shortcode=o.states.selectedShortcode,a.ancestors=o.states.selectedShortcode.ancestors.reverse(),a.ancestors.splice(0,1),void n.cover(t.$element).addClass("active")):n.removeClass("active")}),e.$on(s.CHANGE,function(){o.states.selectedShortcode&&n.cover(o.states.selectedShortcode.$element)})}return t.$inject=["$scope","$element","app","store","Event"],(0,a["default"])(t,[{key:"configureShortcode",value:function(t){this.app.configureShortcode(t)}},{key:"outlineShortcode",value:function(t){this.app.outlineShortcode(t)}},{key:"hideOutline",value:function(){this.app.outlineShortcode(null)}},{key:"showContextMenu",value:function(t){this.app("contextMenu").open(this.shortcode,t.currentTarget)}}]),t}();c["default"].component("appSelectTool",{controller:u,bindings:{shortcode:"<"},template:'\n    <div class="wrapper">\n      <div ng-if="$ctrl.ancestors.length > 0" class="ancestors">\n        <span class="dashicons dashicons-arrow-up-alt2"></span>\n        <ul>\n          <li ng-repeat="ancestor in $ctrl.ancestors">\n            <button type="button" class="name"\n              draggable-shortcode="ancestor"\n              ng-click="$ctrl.configureShortcode(ancestor); $event.stopPropagation();"\n              ng-mouseover="$ctrl.outlineShortcode(ancestor)"\n              ng-mouseout="$ctrl.hideOutline()">\n              {{:: ancestor.data.name }}\n            </button>\n          </li>\n        </ul>\n      </div>\n      <h3 class="name" draggable-shortcode="$ctrl.shortcode">\n        {{ $ctrl.shortcode.data.name }}\n      </h3>\n      <button class="options" ng-click="$ctrl.showContextMenu($event); $event.stopPropagation();">\n        <span class="dashicons dashicons-admin-generic"></span>\n      </button>\n    </div>\n  '})},function(t,e,n){"use strict";function o(t){return t&&t.__esModule?t:{"default":t}}var r=n(7),i=o(r),s=n(99),a=o(s);i["default"].component("postWrapper",{controller:a["default"],template:"\n    <post-content></post-content>\n  "})},function(t,e,n){"use strict";function o(t){return t&&t.__esModule?t:{"default":t}}function r(t){var e=t.offset(),n=t.height(),o=e.top+n;return o<i()||e.top>i()+window.innerHeight}function i(){return document.documentElement.scrollTop||document.body.scrollTop}function s(t){var e=arguments.length<=1||void 0===arguments[1]?null:arguments[1];angular.element("html, body").scrollToElement(t,e)}Object.defineProperty(e,"__esModule",{value:!0});var a=n(11),l=o(a),c=["app","store","targets","contextmenu","utils","Shortcode","$scope","$element","$iframe","$compile","$window","$timeout","$log","AppEvent","Event","MediaEvent","IframeEvent",function u(t,e,n,o,i,a,c,d,p,f,h,g,m,v,$,b,y){(0,l["default"])(this,u),o.attach(document);var w=null,x=performance.now();e.postContent=a.create(e.post.content),m.debug("Element instances created in "+(performance.now()-x)+"ms"),angular.element("body").on("click",function(n){n.preventDefault(),e.isDragging||e.isScrolling||(t.configureShortcode(null),t.apply())}),angular.element("body").on("mousemove",function(o){e.isDragging||e.isScrolling||e.isReloading||h.requestAnimationFrame(function(){var e=i.getGlobalCoordinates(o.view,o.clientX,o.clientY),r=n.find(e.x,e.y),s=i.shortcodeFromPoint(e.x,e.y);t("tools").showAddableSpot(r.length?r[0]:null),s.isRoot||t.outlineShortcode(s),t("tools").apply()})}),angular.element("body").on("mouseleave",function(n){e.isDragging||e.isScrolling||e.isReloading||h.requestAnimationFrame(function(){t("tools").hideAddableSpot(),t.outlineShortcode(null),t("tools").apply()})}),angular.element(h).on("scroll",function(){p().trigger(y.SCROLL),e.isScrolling=!0,g.cancel(w),w=g(function(){return e.isScrolling=!1},200,!1)}),c.$on(b.CHANGED,function(){t.states.selectedShortcode?g(function(){return s(t.states.selectedShortcode.$element)},0,!1):r(d)&&g(function(){return s(d)},0,!1)}),angular.element(h).on($.RESIZE,function(){p().trigger(y.RESIZE)}),new MutationObserver(function(t){e.initialized&&n.updateOffsets(!0),p().trigger(y.CHANGED,t)}).observe(document.querySelector("post-content"),{attributes:!0,childList:!0,subtree:!0,characterData:!1}),g(function(){r(d)&&s(d,0),e.initialized=!0,e.loading=!1,t.broadcast(v.READY)},0,!0)}];e["default"]=c},function(t,e,n){"use strict";function o(t){return t&&t.__esModule?t:{"default":t}}var r=n(101),i=o(r),s=n(11),a=o(s),l=n(12),c=o(l),u=n(7),d=o(u),p=angular.element("body"),f=function(){function t(e,n,o,r,i,s,l,c,u,d,p){var f=this;(0,a["default"])(this,t),this.app=e,this.store=n,this.utils=r,this.responsiveHelper=u;var h=performance.now();this.store.postContent.$element=s,this.store.postContent.$scope=i,this.store.postContent.data.addableSpots.map(function(t){o.add(t,{shortcode:f.store.postContent,target:f.store.postContent})}),this.onPostOptionsChanged(n.post.attributes.values,{},n.post.attributes.options),i.$watchCollection(function(){return n.post.attributes.values},function(t,e){f.onPostOptionsChanged(t,e,n.post.attributes.options)}),this.onPostOptionsChanged(n.post.meta.values,{},n.post.meta.options),i.$watchCollection(function(){return n.post.meta.values},function(t,e){f.onPostOptionsChanged(t,e,n.post.meta.options)}),l(function(){c.debug("Elements compiled in "+(performance.now()-h)+"ms")},0,!1)}return t.$inject=["app","store","targets","utils","$scope","$element","$timeout","$log","ResponsiveHelper","IframeEvent","MediaEvent"],(0,c["default"])(t,[{key:"onPostOptionsChanged",value:function(t,e,n){for(var o in t)if(t[o]!==e[o]){var r=n.get(o);r.onChange&&r.apply(p,t[o],e[o])}}},{key:"showTemplates",value:function(){return this.store.postContent.isEmpty&&(0,i["default"])(this.store.templates).length}}]),t}();d["default"].component("postContent",{controller:f,template:'\n    <content content="_root [root]" shortcode="$ctrl.store.postContent"></content>\n    <template-selector ng-if="$ctrl.showTemplates()"></template-selector>\n  '})},function(t,e,n){t.exports={"default":n(102),__esModule:!0}},function(t,e,n){n(103),t.exports=n(109).Object.keys},function(t,e,n){var o=n(104);n(106)("keys",function(t){return function(e){return t(o(e))}})},function(t,e,n){var o=n(105);t.exports=function(t){return Object(o(t))}},function(t,e){t.exports=function(t){if(void 0==t)throw TypeError("Can't call method on  "+t);return t}},function(t,e,n){var o=n(107),r=n(109),i=n(112);t.exports=function(t,e){var n=(r.Object||{})[t]||Object[t],s={};s[t]=e(n),o(o.S+o.F*i(function(){n(1)}),"Object",s)}},function(t,e,n){var o=n(108),r=n(109),i=n(110),s="prototype",a=function(t,e,n){var l,c,u,d=t&a.F,p=t&a.G,f=t&a.S,h=t&a.P,g=t&a.B,m=t&a.W,v=p?r:r[e]||(r[e]={}),$=p?o:f?o[e]:(o[e]||{})[s];p&&(n=e);for(l in n)c=!d&&$&&l in $,c&&l in v||(u=c?$[l]:n[l],v[l]=p&&"function"!=typeof $[l]?n[l]:g&&c?i(u,o):m&&$[l]==u?function(t){var e=function(e){return this instanceof t?new t(e):t(e)};return e[s]=t[s],e}(u):h&&"function"==typeof u?i(Function.call,u):u,h&&((v[s]||(v[s]={}))[l]=u))};a.F=1,a.G=2,a.S=4,a.P=8,a.B=16,a.W=32,t.exports=a},function(t,e){var n=t.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=n)},function(t,e){var n=t.exports={version:"1.2.6"};"number"==typeof __e&&(__e=n)},function(t,e,n){var o=n(111);t.exports=function(t,e,n){if(o(t),void 0===e)return t;switch(n){case 1:return function(n){return t.call(e,n)};case 2:return function(n,o){return t.call(e,n,o)};case 3:return function(n,o,r){return t.call(e,n,o,r)}}return function(){return t.apply(e,arguments)}}},function(t,e){t.exports=function(t){if("function"!=typeof t)throw TypeError(t+" is not a function!");return t}},function(t,e){t.exports=function(t){try{return!!t()}catch(e){return!0}}},function(t,e,n){"use strict";function o(t){return t&&t.__esModule?t:{"default":t}}var r=n(7),i=o(r);i["default"].component("templateSelector",{controller:["app","store","iframe",function(t,e,n){this.store=e,this.setTemplate=function(o){e.loading=!0,jQuery.post(e.ajaxUrl,{action:"ux_builder_to_array",id:o}).done(function(r){var i=r.data,s=r.success;return s?(e.post.meta.values.hasOwnProperty("_wp_page_template")&&(e.post.meta.values._wp_page_template=e.templates[o].template||"default"),n.reload(i.content),void t.apply()):console.error("Failed to compile template "+o)})}}],template:'\n    <h2 class="uxb-templates-title">Insert a template <br/> <small> *Images are not included.</small></h2>\n    <ul class="uxb-templates-list">\n      <li class="uxb-template" ng-repeat="(id, template) in $ctrl.store.templates track by id">\n        <button type="button" class="uxb-template-button" ng-click="$ctrl.setTemplate(id)">\n          <img ng-attr-src="{{:: template.thumbnail }}">\n          <span class="">{{:: template.name }}</span>\n        </button>\n      </li>\n    </ul>\n  '})},function(t,e,n){"use strict";function o(t){return t&&t.__esModule?t:{"default":t}}var r=n(7),i=o(r),s=n(115),a=o(s);i["default"].component("content",{controller:a["default"],transclude:"element",bindings:{shortcode:"<"}})},function(t,e,n){"use strict";function o(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var r=n(11),i=o(r),s=["app","store","utils","dependencies","$scope","$element","$compile","$q","$transclude","$injector","$templateCache","$animate","$timeout","$controller","$log","ShortcodeEvent","ChildEvent",function a(t,e,n,o,r,s,l,c,u,d,p,f,h,g,m,v,$){function b(t,e){var n=[],o=[];_.each(t,function(e,o){e.$element||(n.push(e),e.$scope=r.$new(),E(e),y(e).then(w),f.move(e.$element,null,0===o?s:t[o-1].$element))}),_.each(e,function(e,n){t.indexOf(e)>-1||(e.originalIndex=n,o.push(e))}),e&&e.length===t.length&&_.each(t,function(t,e){f.move(t.$element,null,0===e?s:A.shortcode.children[e-1].$element)}),_.each(o,function(t){return r.$parent.$broadcast($.REMOVED,t)}),_.each(n,function(t){return r.$parent.$broadcast($.ADDED,t)}),_.each(o,function(t){f.leave(t.$element),t.$scope.$destroy(),t.$element.data("shortcode",null),t.$element.remove(),t.$element=null,t.$content=null,t.$scope=null}),u(function(e,n){C||0!==t.length?A.shortcode.$content&&(C.$destroy(),f.leave(A.shortcode.$content),A.shortcode.$content.data("shortcode",null),A.shortcode.$content.remove(),A.shortcode.$content=null,C=null):(C=n,e.html('\n                        <div class="uxb-empty-message">\n                            '+A.shortcode.data.message+"\n                        </div>\n                    "),e.data("shortcode",A.shortcode),A.shortcode.$content=e,f.enter(A.shortcode.$content,s.parent(),s))})}function y(n){var o=c.defer(),r=!0,i=n.data.template||p.get(n.data.templateUrl||n.$id);return angular.isDefined(i)?(l(S(n,i))(n.$scope,function(t){t.data("shortcode",n),n.$element=t,o.resolve(n)}),o.promise):("undefined"==typeof n.$element&&(i=S(n,p.get("shortcodes/_loading.html"),!0),n.$element=l(i)(n.$scope),n.$element.data("shortcode",n),r=!1),jQuery.post(e.postUrl,{ux_builder_action:"do_shortcode",ux_builder_shortcode:n.copy(function(t,e){t.$id=e.$id,t.depth=e.ancestors.length,t.nested=_.filter(e.ancestors,function(t){return t.tag===e.tag}).length})}).done(function(e){n.$scope&&(p.put(n.$id,e),i=S(n,e),l(i)(n.$scope,function(e){r&&t.trigger(v.DETACHED,n),n.children&&n.children.forEach(function(t){t.$element&&(t.$element.data("shortcode",null),t.$element.remove(),delete t.$element)}),e.data("shortcode",n),n.$element.replaceWith(e),n.$element=e,o.resolve(n)}))}),o.promise)}function w(n){var r={$scope:n.$scope,$element:n.$element,tools:e.tools?e.tools["custom"+capitalize(n.tag)+"Tools"]:null,shortcode:n};c.all([o.injectStyles(n.data.styles),o.injectScripts(n.data.scripts)])["finally"](function(){g("ShortcodeController as $ctrl",r),n.data.controller&&g(n.tag+"__controller as $customCtrl",r),n.data.template||t.trigger(v.ATTACHED,n)})}function x(e){h.cancel(e.$recompile),e.$element.addClass("processing"),e.$recompile=h(function(){var n=[];if(p.remove(e.$id),e.isParent)for(var o=e.children.length-1;o>=0;o--)n.unshift(e.children[o].copy()),e.children[o].remove();y(e).then(function(e){var o=e.replaceWith(e.copy(function(t,e){t.$id=e.$id,e.isParent&&(t.children=n)}));t.broadcast(v.RECOMPILED,o)}),m.debug("x recompiling",e.tag),delete e.$recompile},250,!1)}function E(t){var e=t.index,n=t.siblings;return t.$scope.shortcode=t,t.$scope.$index=e,t.$scope.$first=0===e,t.$scope.$last=e===n.length-1,t.$scope.$middle=!(t.$scope.$first||t.$scope.$last),t.$scope.$odd=!(t.$scope.$even=0===(1&e)),t.$scope.$$recompile=function(){return x(t)},t.$scope.$on("$destroy",function(){delete t.$scope.shortcode,delete t.$scope.$$recompile}),t}function S(t,e,n){if(e=e.replace("<content",'<content content="'+t.tag+" ["+t.$id+']" shortcode="shortcode"'),e=e.replace(/<script\b[^<]*(?:(?!<\/script>)<[^<]*)*<\/script>/gi,""),e=e.replace(/<!--[\s\S]*?-->/g,""),t.data.wrap||n){var o=["uxb-wrapper"];t.data.inline&&o.push("uxb-wrapper-inline"),t.data.overlay&&(e+='<div class="uxb-overlay"></div>'),e='\n                  <div class="'+o.join(" ")+'">\n                    '+e+"\n                  </div>\n                "}return e}var k=this;(0,i["default"])(this,a);var C,A=this;r.$watchCollection(function(){return k.shortcode.children},b)}];e["default"]=s},function(t,e,n){"use strict";function o(t){return t&&t.__esModule?t:{"default":t}}function r(t){var e=[],n=t.split(".");return _.each(n,function(t){e.push(jQuery.camelCase(t.replace(/\:/g,"-")))}),e.join(".")}Object.defineProperty(e,"__esModule",{value:!0}),e.data=void 0;var i=n(11),s=o(i),a=n(12),l=o(a),c=e.data=(window.frameElement?window.parent:window).uxBuilderData,u=function(){function t(e){(0,s["default"])(this,t),this.$parse=e}return t.$inject=["$parse"],(0,l["default"])(t,[{key:"storage",value:function(){return c}},{key:"set",value:function(t,e){return this.$parse(r(t)).assign(c,e)}},{key:"get",value:function(t,e){var n=this.$parse(r(t))(c);return!angular.isDefined(n)&&e?this.set(t,e):n}},{key:"unset",value:function(t){var e;return t.indexOf("*")?(e=t.split("*")[0],this.$parse(r(e)).assign(c,null)):this.$parse(r(t)).assign(c,null)}}]),t}();e["default"]=u}]);